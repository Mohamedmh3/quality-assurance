import { UseCase } from '@/lib/types';

export const phoneNumberUseCases: UseCase[] = [
  {
    id: 'UC-PHONE-001',
    title: 'Enter Phone Number for Login',
    priority: 'Critical',
    userType: 'End User',
    description: 'User enters their phone number with country code to initiate login process',
    preconditions: ['App is installed', 'User has valid phone number'],
    steps: [
      {
        step: 1,
        action: 'Open the app',
        expectedResult: 'App opens and shows phone number entry screen',
        uiState: 'Phone number entry screen with logo, welcome image, country code picker, and phone input field',
        flutterFile: 'phone_number_screen.dart:19-66',
      },
      {
        step: 2,
        action: 'Select country code from picker',
        expectedResult: 'Country code is selected and displayed',
        uiState: 'Country code picker opens, country is selected, picker closes and selected code is displayed',
        flutterFile: 'phone_number_text_field.dart:72-105',
      },
      {
        step: 3,
        action: 'Enter phone number digits',
        expectedResult: 'Phone number is entered and validated in real-time',
        uiState: 'Phone number field accepts digits, validation occurs, Submit button becomes enabled when valid',
        flutterFile: 'phone_number_text_field.dart:108-150',
      },
      {
        step: 4,
        action: 'Tap Submit button',
        expectedResult: 'Confirmation dialog appears showing full phone number',
        uiState: 'Confirmation dialog displays phone number with question "Is this the correct number?"',
        flutterFile: 'show_confirm_number_dialog.dart:10-86',
      },
      {
        step: 5,
        action: 'Confirm phone number',
        expectedResult: 'Terms and privacy policy bottom sheet appears',
        uiState: 'Bottom sheet slides up from bottom showing terms and privacy policy acceptance UI',
        flutterFile: 'open_terms_bottom_sheet.dart',
      },
      {
        step: 6,
        action: 'Accept terms and privacy policy',
        expectedResult: 'Login request is sent and OTP screen appears',
        uiState: 'Bottom sheet closes, loading indicator appears, then navigation to OTP screen',
        flutterFile: 'phone_number_viewmodel.dart:96-119',
      },
    ],
    postconditions: ['OTP code is sent to phone number', 'User navigates to OTP verification screen'],
    successCriteria: ['Phone number is validated', 'Confirmation dialog appears', 'Terms are accepted', 'OTP screen appears'],
    relatedTestCases: ['TC-PHONE-001'],
  },
  {
    id: 'UC-PHONE-002',
    title: 'Select Previous Phone Number',
    priority: 'High',
    userType: 'End User',
    description: 'User selects a previously used phone number from the list',
    preconditions: ['User has previously logged in with phone numbers', 'Device ID matches previous sessions'],
    steps: [
      {
        step: 1,
        action: 'Open phone number screen',
        expectedResult: 'Screen loads and checks for previous phone numbers',
        uiState: 'Loading indicator appears, then previous numbers list or entry form appears',
        flutterFile: 'phone_number_viewmodel.dart:30-71',
      },
      {
        step: 2,
        action: 'Previous numbers are found',
        expectedResult: 'List of previous phone numbers is displayed',
        uiState: 'List of phone number cards showing number and username',
        flutterFile: 'phone_number_body.dart:152-242',
      },
      {
        step: 3,
        action: 'Tap on a previous phone number',
        expectedResult: 'Phone number is selected and confirmation dialog appears',
        uiState: 'Phone number is selected, confirmation dialog shows full number',
        flutterFile: 'phone_number_body.dart:172-191',
      },
      {
        step: 4,
        action: 'Confirm the selected number',
        expectedResult: 'Terms bottom sheet appears',
        uiState: 'Dialog closes, terms bottom sheet slides up',
        flutterFile: 'open_terms_bottom_sheet.dart',
      },
      {
        step: 5,
        action: 'Accept terms',
        expectedResult: 'Login request is sent with selected phone number',
        uiState: 'Bottom sheet closes, loading indicator appears, navigation to OTP screen',
        flutterFile: 'phone_number_viewmodel.dart:96-119',
      },
    ],
    postconditions: ['Selected phone number is used for login', 'OTP is sent to selected number'],
    successCriteria: ['Previous numbers list appears', 'Number can be selected', 'Login proceeds'],
    relatedTestCases: ['TC-PHONE-002'],
  },
  {
    id: 'UC-PHONE-003',
    title: 'Continue as Guest',
    priority: 'Medium',
    userType: 'End User',
    description: 'User chooses to continue without logging in',
    preconditions: ['App is installed', 'User wants to browse without account'],
    steps: [
      {
        step: 1,
        action: 'Open phone number screen',
        expectedResult: 'Screen displays with guest option at bottom',
        uiState: 'Phone number entry form with "Continue as Guest" button at bottom',
        flutterFile: 'phone_number_body.dart:338',
      },
      {
        step: 2,
        action: 'Tap "Continue as Guest" button',
        expectedResult: 'Location permissions are checked',
        uiState: 'Permission check occurs, then navigation based on result',
        flutterFile: 'guest_button_widget.dart:26-41',
      },
      {
        step: 3,
        action: 'Location permissions granted',
        expectedResult: 'User navigates to home screen as guest',
        uiState: 'Navigation to home screen occurs',
        flutterFile: 'guest_button_widget.dart:32-35',
      },
      {
        step: 4,
        action: 'Location permissions denied',
        expectedResult: 'User navigates to permission request screen',
        uiState: 'Navigation to permission request screen occurs',
        flutterFile: 'guest_button_widget.dart:37-40',
      },
    ],
    postconditions: ['User accesses app as guest', 'Limited features available'],
    successCriteria: ['Guest mode activates', 'Navigation occurs correctly'],
    relatedTestCases: ['TC-PHONE-003'],
  },
  {
    id: 'UC-PHONE-004',
    title: 'Change Country Code',
    priority: 'High',
    userType: 'End User',
    description: 'User changes the country code to match their phone number',
    preconditions: ['App is installed', 'User has phone number from different country'],
    steps: [
      {
        step: 1,
        action: 'Open phone number screen',
        expectedResult: 'Default country code is displayed',
        uiState: 'Country code picker shows default country code (flag and dial code)',
        flutterFile: 'phone_number_viewmodel.dart:52-53',
      },
      {
        step: 2,
        action: 'Tap on country code picker',
        expectedResult: 'Country code picker opens with list of countries',
        uiState: 'Country picker opens showing list with flags, names, and dial codes',
        flutterFile: 'phone_number_text_field.dart:72-105',
      },
      {
        step: 3,
        action: 'Select different country',
        expectedResult: 'Country code changes and phone validation rules update',
        uiState: 'Picker closes, selected country code is displayed, validation rules update',
        flutterFile: 'phone_number_viewmodel.dart:90-94',
      },
      {
        step: 4,
        action: 'Enter phone number',
        expectedResult: 'Phone number is validated according to new country rules',
        uiState: 'Phone number field validates according to selected country min/max length',
        flutterFile: 'phone_number_text_field.dart:108-150',
      },
    ],
    postconditions: ['Correct country code is selected', 'Phone validation matches country format'],
    successCriteria: ['Country code changes', 'Validation updates correctly'],
    relatedTestCases: ['TC-PHONE-004'],
  },
  {
    id: 'UC-PHONE-005',
    title: 'Edit Phone Number After Confirmation',
    priority: 'Medium',
    userType: 'End User',
    description: 'User realizes phone number is wrong and edits it',
    preconditions: ['User has entered phone number', 'Confirmation dialog is shown'],
    steps: [
      {
        step: 1,
        action: 'Enter phone number and tap Submit',
        expectedResult: 'Confirmation dialog appears',
        uiState: 'Confirmation dialog shows full phone number',
        flutterFile: 'show_confirm_number_dialog.dart:10-86',
      },
      {
        step: 2,
        action: 'Review phone number in dialog',
        expectedResult: 'User notices incorrect number',
        uiState: 'Phone number is displayed in dialog for review',
        flutterFile: 'show_confirm_number_dialog.dart:45-50',
      },
      {
        step: 3,
        action: 'Tap Edit button',
        expectedResult: 'Dialog closes and returns to phone entry screen',
        uiState: 'Dialog closes, phone entry screen appears with number still in field',
        flutterFile: 'show_confirm_number_dialog.dart:67-78',
      },
      {
        step: 4,
        action: 'Correct the phone number',
        expectedResult: 'Phone number field is editable again',
        uiState: 'Phone number field is editable, user can modify digits',
        flutterFile: 'phone_number_body.dart:244-277',
      },
      {
        step: 5,
        action: 'Tap Submit again',
        expectedResult: 'New confirmation dialog appears with corrected number',
        uiState: 'Confirmation dialog appears showing corrected phone number',
        flutterFile: 'show_confirm_number_dialog.dart:10-86',
      },
    ],
    postconditions: ['User can edit phone number', 'Corrected number can be confirmed'],
    successCriteria: ['Edit button works', 'Number can be corrected', 'Corrected number can be confirmed'],
    relatedTestCases: ['TC-PHONE-005'],
  },
  {
    id: 'UC-PHONE-006',
    title: 'Login with Another Account',
    priority: 'Medium',
    userType: 'End User',
    description: 'User switches from previous numbers list to enter new number',
    preconditions: ['Previous phone numbers exist', 'User wants to use different account'],
    steps: [
      {
        step: 1,
        action: 'Open phone number screen',
        expectedResult: 'Previous phone numbers list is displayed',
        uiState: 'List of previous phone numbers is shown',
        flutterFile: 'phone_number_body.dart:152-242',
      },
      {
        step: 2,
        action: 'Tap "Login with Another Account" button',
        expectedResult: 'Previous numbers list is hidden',
        uiState: 'Previous numbers list disappears, phone entry form appears',
        flutterFile: 'phone_number_viewmodel.dart:121-124',
      },
      {
        step: 3,
        action: 'Phone entry form appears',
        expectedResult: 'User can enter new phone number',
        uiState: 'Phone number input field is available',
        flutterFile: 'phone_number_body.dart:244-277',
      },
      {
        step: 4,
        action: 'Enter new phone number',
        expectedResult: 'New phone number is validated',
        uiState: 'Phone number is entered and validated',
        flutterFile: 'phone_number_text_field.dart:108-150',
      },
      {
        step: 5,
        action: 'Submit new number',
        expectedResult: 'Login proceeds with new phone number',
        uiState: 'Confirmation dialog, terms acceptance, then OTP screen',
        flutterFile: 'phone_number_viewmodel.dart:96-119',
      },
    ],
    postconditions: ['New phone number can be entered', 'Login proceeds with new number'],
    successCriteria: ['Previous numbers list is hidden', 'New number can be entered', 'Login proceeds'],
    relatedTestCases: ['TC-PHONE-006'],
  },
  {
    id: 'UC-PHONE-007',
    title: 'View Terms and Privacy Policy',
    priority: 'Medium',
    userType: 'End User',
    description: 'User views terms and conditions and privacy policy before accepting',
    preconditions: ['Phone number is confirmed', 'Terms bottom sheet is displayed'],
    steps: [
      {
        step: 1,
        action: 'Enter phone number and confirm',
        expectedResult: 'Terms bottom sheet appears',
        uiState: 'Bottom sheet slides up showing terms and privacy policy acceptance UI',
        flutterFile: 'open_terms_bottom_sheet.dart',
      },
      {
        step: 2,
        action: 'Tap Terms link',
        expectedResult: 'Terms dialog opens with full terms content',
        uiState: 'Terms dialog opens showing full terms and conditions text',
        flutterFile: 'terms_dialog_body_widget.dart',
      },
      {
        step: 3,
        action: 'Read terms and close dialog',
        expectedResult: 'Returns to terms bottom sheet',
        uiState: 'Dialog closes, bottom sheet is still visible',
        flutterFile: 'terms_dialog_body_widget.dart',
      },
      {
        step: 4,
        action: 'Tap Privacy Policy link',
        expectedResult: 'Privacy policy dialog opens',
        uiState: 'Privacy policy dialog opens showing full privacy policy text',
        flutterFile: 'privacy_policy_dialog_widget.dart',
      },
      {
        step: 5,
        action: 'Read privacy policy and close',
        expectedResult: 'Returns to terms bottom sheet',
        uiState: 'Dialog closes, bottom sheet is still visible',
        flutterFile: 'privacy_policy_dialog_widget.dart',
      },
      {
        step: 6,
        action: 'Accept terms and privacy policy',
        expectedResult: 'Login request is sent',
        uiState: 'Bottom sheet closes, loading indicator appears, navigation to OTP screen',
        flutterFile: 'phone_number_viewmodel.dart:96-119',
      },
    ],
    postconditions: ['User can review terms and privacy policy', 'User accepts before proceeding'],
    successCriteria: ['Terms dialog opens', 'Privacy policy dialog opens', 'Terms are accepted'],
    relatedTestCases: ['TC-PHONE-007'],
  },
  {
    id: 'UC-PHONE-008',
    title: 'Handle Loading States',
    priority: 'High',
    userType: 'End User',
    description: 'App handles loading states during data fetching and login',
    preconditions: ['App is installed', 'Network connection available'],
    steps: [
      {
        step: 1,
        action: 'Open phone number screen',
        expectedResult: 'Loading indicator appears while fetching countries and previous numbers',
        uiState: 'Loading indicator (spinner) is displayed',
        flutterFile: 'phone_number_screen.dart:74-79',
      },
      {
        step: 2,
        action: 'Data loads successfully',
        expectedResult: 'Phone entry form appears',
        uiState: 'Loading indicator disappears, phone entry form is displayed',
        flutterFile: 'phone_number_body.dart:24-350',
      },
      {
        step: 3,
        action: 'Submit phone number',
        expectedResult: 'Loading indicator appears during login request',
        uiState: 'Loading indicator appears, Submit button may show loading state',
        flutterFile: 'phone_number_viewmodel.dart:108',
      },
      {
        step: 4,
        action: 'Login succeeds',
        expectedResult: 'Navigation to OTP screen occurs',
        uiState: 'Loading indicator disappears, navigation to OTP screen',
        flutterFile: 'phone_number_screen.dart:44-54',
      },
    ],
    postconditions: ['Loading states are shown appropriately', 'User sees progress feedback'],
    successCriteria: ['Loading indicators appear', 'Loading states are clear', 'Navigation occurs'],
    relatedTestCases: ['TC-PHONE-010'],
  },
];

