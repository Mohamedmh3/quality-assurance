import type { UseCase } from '../types';

export const addressUseCases: UseCase[] = [
  {
    id: 'UC-ADDRESS-001',
    title: 'Open Address Map Screen',
    priority: 'Critical',
    userType: 'End User',
    description: 'When a customer wants to add a new address, they open the map screen where they can see their location and select a delivery point on the map.',
    preconditions: [
      'User has location permissions enabled',
      'User opens add address screen',
    ],
    steps: [
      {
        step: 1,
        action: 'App loads map with delivery area boundaries',
        expectedResult: 'Map displays with polygons showing delivery areas',
        uiState: 'Loading indicator shows while map loads',
        flutterFile: 'map_viewmodel.dart:372-413',
      },
      {
        step: 2,
        action: 'App gets user current location',
        expectedResult: 'Map centers on user location',
        uiState: 'Map moves to show user location with marker',
        flutterFile: 'map_viewmodel.dart:172-246',
      },
      {
        step: 3,
        action: 'App shows delivery area circles and polygons',
        expectedResult: 'Delivery boundaries visible on map',
        uiState: 'Colored areas show where delivery is available',
        flutterFile: 'map_viewmodel.dart:195-206, 372-413',
      },
    ],
    postconditions: [
      'Map screen displays with user location',
      'Delivery areas visible',
      'User can move map to select address',
    ],
    successCriteria: [
      'Map loads successfully',
      'User location shown correctly',
      'Delivery areas displayed',
    ],
    relatedTestCases: ['TC-ADDRESS-001', 'TC-ADDRESS-002'],
  },
  {
    id: 'UC-ADDRESS-002',
    title: 'Select Location on Map',
    priority: 'Critical',
    userType: 'End User',
    description: 'Customer moves the map to select where they want their delivery address. The app shows a pin marker that moves as they drag the map.',
    preconditions: [
      'Map screen is loaded',
      'User can see the map',
    ],
    steps: [
      {
        step: 1,
        action: 'User drags map to move it',
        expectedResult: 'Map moves to new position',
        uiState: 'Map follows finger movement',
        flutterFile: 'add_address_view.dart:132-135',
      },
      {
        step: 2,
        action: 'App moves pin marker to center of map',
        expectedResult: 'Pin marker updates position',
        uiState: 'Pin marker moves to center',
        flutterFile: 'map_viewmodel.dart:526-541',
      },
      {
        step: 3,
        action: 'App checks if location is in delivery area',
        expectedResult: 'Pin color changes based on delivery area status',
        uiState: 'Pin turns red if outside delivery area, blue if inside',
        flutterFile: 'map_viewmodel.dart:526-541, 579-617',
      },
      {
        step: 4,
        action: 'App gets address details from map location',
        expectedResult: 'Address fields auto-fill if enabled',
        uiState: 'Area and street fields may fill automatically',
        flutterFile: 'map_viewmodel.dart:443-455',
      },
    ],
    postconditions: [
      'Pin marker at selected location',
      'Location status determined',
      'Address details available',
    ],
    successCriteria: [
      'Map moves smoothly',
      'Pin updates correctly',
      'Location status shown',
    ],
    relatedTestCases: ['TC-ADDRESS-003', 'TC-ADDRESS-004', 'TC-ADDRESS-005'],
  },
  {
    id: 'UC-ADDRESS-003',
    title: 'Use Current Location Button',
    priority: 'High',
    userType: 'End User',
    description: 'Customer taps the floating button to quickly move the map to their current location.',
    preconditions: [
      'Map screen is loaded',
      'Location permissions granted',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps floating location button',
        expectedResult: 'App gets current location',
        uiState: 'Button shows loading state',
        flutterFile: 'add_address_view.dart:331-347',
      },
      {
        step: 2,
        action: 'App moves map camera to current location',
        expectedResult: 'Map centers on user location',
        uiState: 'Map smoothly moves to show current location',
        flutterFile: 'map_viewmodel.dart:186-194, 235-242',
      },
      {
        step: 3,
        action: 'App updates pin marker to current location',
        expectedResult: 'Pin marker at current location',
        uiState: 'Pin appears at center of map',
        flutterFile: 'map_viewmodel.dart:209, 244',
      },
    ],
    postconditions: [
      'Map shows current location',
      'Pin marker at current location',
      'User can confirm this location',
    ],
    successCriteria: [
      'Location button works',
      'Map moves to current location',
      'Pin updates correctly',
    ],
    relatedTestCases: ['TC-ADDRESS-006'],
  },
  {
    id: 'UC-ADDRESS-004',
    title: 'Search for Location',
    priority: 'High',
    userType: 'End User',
    description: 'Customer types in the search box to find a specific address or place. The app shows search results and customer can tap one to move the map there.',
    preconditions: [
      'Map screen is loaded',
      'Search feature is enabled',
    ],
    steps: [
      {
        step: 1,
        action: 'User types in search box',
        expectedResult: 'Search text updates',
        uiState: 'Text appears in search box',
        flutterFile: 'location_search_widget.dart:288-308',
      },
      {
        step: 2,
        action: 'App searches for locations after user stops typing',
        expectedResult: 'Search results appear',
        uiState: 'List of matching locations shows below search box',
        flutterFile: 'map_viewmodel.dart:488-523',
      },
      {
        step: 3,
        action: 'User taps a search result',
        expectedResult: 'Map moves to selected location',
        uiState: 'Map smoothly moves to show selected place',
        flutterFile: 'location_search_widget.dart:224-232',
      },
      {
        step: 4,
        action: 'App updates pin marker to selected location',
        expectedResult: 'Pin marker at selected location',
        uiState: 'Pin appears at new location',
        flutterFile: 'add_address_view.dart:398-412',
      },
    ],
    postconditions: [
      'Map shows selected location',
      'Pin marker at selected location',
      'Search results hidden',
    ],
    successCriteria: [
      'Search works correctly',
      'Results show relevant locations',
      'Map moves to selected location',
    ],
    relatedTestCases: ['TC-ADDRESS-007', 'TC-ADDRESS-008'],
  },
  {
    id: 'UC-ADDRESS-005',
    title: 'Confirm Pin Location',
    priority: 'Critical',
    userType: 'End User',
    description: 'After selecting a location on the map, customer taps the confirm button to proceed to address details screen.',
    preconditions: [
      'User has selected a location on map',
      'Pin marker is visible',
    ],
    steps: [
      {
        step: 1,
        action: 'App checks if location is valid',
        expectedResult: 'Location status determined',
        uiState: 'Button text changes based on location status',
        flutterFile: 'add_address_view.dart:248-260',
      },
      {
        step: 2,
        action: 'If zoom is too far out, app asks user to zoom in',
        expectedResult: 'Zoom check performed',
        uiState: 'Message shows: "Please zoom more to get accurate location"',
        flutterFile: 'map_viewmodel.dart:254-261, add_address_view.dart:258-259',
      },
      {
        step: 3,
        action: 'If location is out of delivery area, app shows notify option',
        expectedResult: 'Out of area status detected',
        uiState: 'Button shows "Notify" text',
        flutterFile: 'add_address_view.dart:250-253',
      },
      {
        step: 4,
        action: 'If location is valid, user taps confirm button',
        expectedResult: 'App goes to address details screen',
        uiState: 'Screen changes to address form',
        flutterFile: 'add_address_view.dart:312-321',
      },
    ],
    postconditions: [
      'Address details screen opens',
      'Location coordinates saved',
      'Form ready for address information',
    ],
    successCriteria: [
      'Location validation works',
      'Button shows correct text',
      'Navigation to details screen works',
    ],
    relatedTestCases: ['TC-ADDRESS-009', 'TC-ADDRESS-010', 'TC-ADDRESS-011'],
  },
  {
    id: 'UC-ADDRESS-006',
    title: 'Fill Address Details Form',
    priority: 'Critical',
    userType: 'End User',
    description: 'Customer fills in the address form with title, area, street, details, and optional phone number.',
    preconditions: [
      'Address details screen is open',
      'Location is selected',
    ],
    steps: [
      {
        step: 1,
        action: 'App shows address form fields',
        expectedResult: 'Form displays with required fields',
        uiState: 'Form shows title, area, street, details, phone fields',
        flutterFile: 'new_address_details_view.dart:147-296',
      },
      {
        step: 2,
        action: 'App may auto-fill area and street from map location',
        expectedResult: 'Some fields pre-filled if available',
        uiState: 'Area and street fields show location data',
        flutterFile: 'map_viewmodel.dart:443-455',
      },
      {
        step: 3,
        action: 'User types address title',
        expectedResult: 'Title field updates',
        uiState: 'Text appears in title field',
        flutterFile: 'new_address_details_view.dart:148-162',
      },
      {
        step: 4,
        action: 'User types area name',
        expectedResult: 'Area field updates',
        uiState: 'Text appears in area field',
        flutterFile: 'new_address_details_view.dart:169-192',
      },
      {
        step: 5,
        action: 'User types street name',
        expectedResult: 'Street field updates',
        uiState: 'Text appears in street field',
        flutterFile: 'new_address_details_view.dart:193-216',
      },
      {
        step: 6,
        action: 'User types address details',
        expectedResult: 'Details field updates',
        uiState: 'Text appears in details field',
        flutterFile: 'new_address_details_view.dart:243-261',
      },
      {
        step: 7,
        action: 'User optionally types phone number',
        expectedResult: 'Phone field updates',
        uiState: 'Numbers appear in phone field',
        flutterFile: 'new_address_details_view.dart:268-296',
      },
    ],
    postconditions: [
      'All form fields filled',
      'Form ready to save',
    ],
    successCriteria: [
      'All fields work correctly',
      'Auto-fill works if enabled',
      'Form accepts input',
    ],
    relatedTestCases: ['TC-ADDRESS-012', 'TC-ADDRESS-013'],
  },
  {
    id: 'UC-ADDRESS-007',
    title: 'Save New Address',
    priority: 'Critical',
    userType: 'End User',
    description: 'After filling the address form, customer taps save button to save the new address.',
    preconditions: [
      'Address form is filled',
      'All required fields have valid data',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps save button',
        expectedResult: 'App checks if form is valid',
        uiState: 'Button shows loading state',
        flutterFile: 'new_address_details_view.dart:303-338',
      },
      {
        step: 2,
        action: 'App checks each field is correct',
        expectedResult: 'Validation passes',
        uiState: 'No error messages shown',
        flutterFile: 'new_address_details_view.dart:155-161, 179-185, 203-209, 254-260, 286-295',
      },
      {
        step: 3,
        action: 'App saves address to server',
        expectedResult: 'Address saved successfully',
        uiState: 'Loading indicator shows',
        flutterFile: 'map_viewmodel.dart:304-337',
      },
      {
        step: 4,
        action: 'App clears form fields',
        expectedResult: 'All fields cleared',
        uiState: 'Form fields empty',
        flutterFile: 'map_viewmodel.dart:321-327',
      },
      {
        step: 5,
        action: 'App refreshes address list',
        expectedResult: 'New address appears in list',
        uiState: 'Address list updated',
        flutterFile: 'map_viewmodel.dart:328',
      },
      {
        step: 6,
        action: 'App goes back to previous screen',
        expectedResult: 'Screen closes',
        uiState: 'Previous screen shows',
        flutterFile: 'new_address_details_view.dart:325-332',
      },
    ],
    postconditions: [
      'New address saved',
      'Address list updated',
      'User returned to previous screen',
    ],
    successCriteria: [
      'Address saves successfully',
      'No errors shown',
      'Navigation works correctly',
    ],
    relatedTestCases: ['TC-ADDRESS-014', 'TC-ADDRESS-015', 'TC-ADDRESS-016'],
  },
  {
    id: 'UC-ADDRESS-008',
    title: 'Notify for Out of Delivery Area',
    priority: 'Medium',
    userType: 'End User',
    description: 'If customer selects a location outside delivery area, they can tap notify button to request delivery service for that area.',
    preconditions: [
      'User selected location outside delivery area',
      'Notify button is visible',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps notify button',
        expectedResult: 'App sends notification request',
        uiState: 'Button shows loading state',
        flutterFile: 'map_viewmodel.dart:416-441',
      },
      {
        step: 2,
        action: 'App saves location coordinates',
        expectedResult: 'Location saved for notification',
        uiState: 'Loading indicator shows',
        flutterFile: 'map_viewmodel.dart:419-422',
      },
      {
        step: 3,
        action: 'App shows success message',
        expectedResult: 'Notification recorded',
        uiState: 'Message shows: "Notification recorded"',
        flutterFile: 'map_viewmodel.dart:425-432',
      },
      {
        step: 4,
        action: 'Button becomes disabled',
        expectedResult: 'Notify button disabled',
        uiState: 'Button cannot be tapped again',
        flutterFile: 'map_viewmodel.dart:423',
      },
    ],
    postconditions: [
      'Notification request sent',
      'Location saved',
      'User notified',
    ],
    successCriteria: [
      'Notification saves successfully',
      'Success message shows',
      'Button disables correctly',
    ],
    relatedTestCases: ['TC-ADDRESS-017'],
  },
  {
    id: 'UC-ADDRESS-009',
    title: 'Zoom In for Accurate Location',
    priority: 'Medium',
    userType: 'End User',
    description: 'If customer tries to confirm location when map is zoomed out too far, app asks them to zoom in more for accurate location.',
    preconditions: [
      'User selected a location',
      'Map zoom level is less than 16',
    ],
    steps: [
      {
        step: 1,
        action: 'App checks zoom level',
        expectedResult: 'Zoom level detected as too low',
        uiState: 'Message shows: "Please zoom more to get accurate location"',
        flutterFile: 'map_viewmodel.dart:254-261',
      },
      {
        step: 2,
        action: 'Button shows "Zoom in more" text',
        expectedResult: 'Button text updated',
        uiState: 'Button shows zoom instruction',
        flutterFile: 'add_address_view.dart:258-259',
      },
      {
        step: 3,
        action: 'User taps zoom button',
        expectedResult: 'Map zooms in one level',
        uiState: 'Map zooms closer',
        flutterFile: 'add_address_view.dart:275-296',
      },
      {
        step: 4,
        action: 'User zooms until level is 16 or higher',
        expectedResult: 'Zoom level sufficient',
        uiState: 'Message disappears, button shows "Confirm pin location"',
        flutterFile: 'map_viewmodel.dart:260',
      },
    ],
    postconditions: [
      'Map zoomed to accurate level',
      'Location can be confirmed',
    ],
    successCriteria: [
      'Zoom check works',
      'Zoom button works',
      'Message updates correctly',
    ],
    relatedTestCases: ['TC-ADDRESS-018'],
  },
  {
    id: 'UC-ADDRESS-010',
    title: 'Return to Current Location',
    priority: 'Medium',
    userType: 'End User',
    description: 'If customer moves pin too far from their actual location, app can show button to return pin to their current location.',
    preconditions: [
      'User moved map away from current location',
      'Location is in polygon but outside allowed zone',
    ],
    steps: [
      {
        step: 1,
        action: 'App detects pin is far from current location',
        expectedResult: 'Distance calculated',
        uiState: 'Message shows: "You are far from your location"',
        flutterFile: 'map_viewmodel.dart:579-617',
      },
      {
        step: 2,
        action: 'Button shows "Back to location" text',
        expectedResult: 'Button text updated',
        uiState: 'Button shows return instruction',
        flutterFile: 'add_address_view.dart:255-257',
      },
      {
        step: 3,
        action: 'User taps back to location button',
        expectedResult: 'Map moves to current location',
        uiState: 'Map smoothly moves to show current location',
        flutterFile: 'add_address_view.dart:269-273',
      },
      {
        step: 4,
        action: 'Pin marker moves to current location',
        expectedResult: 'Pin at current location',
        uiState: 'Pin appears at center',
        flutterFile: 'map_viewmodel.dart:270-273',
      },
    ],
    postconditions: [
      'Map shows current location',
      'Pin at current location',
    ],
    successCriteria: [
      'Distance check works',
      'Return button works',
      'Map moves correctly',
    ],
    relatedTestCases: ['TC-ADDRESS-019'],
  },
  {
    id: 'UC-ADDRESS-011',
    title: 'View Address on Map',
    priority: 'Low',
    userType: 'End User',
    description: 'Customer can view an existing address on the map in read-only mode without editing.',
    preconditions: [
      'User has an existing address',
      'View mode is enabled',
    ],
    steps: [
      {
        step: 1,
        action: 'App opens map with existing address location',
        expectedResult: 'Map shows address location',
        uiState: 'Map centers on address coordinates',
        flutterFile: 'add_address_view.dart:438-440',
      },
      {
        step: 2,
        action: 'App shows pin marker at address',
        expectedResult: 'Pin visible at address',
        uiState: 'Pin marker shows address location',
        flutterFile: 'add_address_view.dart:105',
      },
      {
        step: 3,
        action: 'Map is in view-only mode',
        expectedResult: 'User cannot edit address',
        uiState: 'No edit buttons visible, map shows location only',
        flutterFile: 'add_address_view.dart:44, 103-111',
      },
    ],
    postconditions: [
      'Address location visible on map',
      'User can see where address is',
    ],
    successCriteria: [
      'Map shows correct location',
      'View mode works',
      'No editing possible',
    ],
    relatedTestCases: ['TC-ADDRESS-020'],
  },
];

