import { UseCase } from '@/lib/types';

export const surveyUseCases: UseCase[] = [
  {
    id: 'UC-SURVEY-001',
    title: 'Display Survey Bottom Sheet',
    priority: 'Critical',
    userType: 'End User',
    description: 'Survey bottom sheet appears when user navigates to a page that has an associated survey',
    preconditions: ['User is logged in', 'Survey exists for current page', 'User has not completed this survey'],
    steps: [
      {
        step: 1,
        action: 'Navigate to a page with associated survey',
        expectedResult: 'Survey bottom sheet appears after 1 second delay',
        uiState: 'Bottom sheet slides up from bottom showing survey title and questions',
        flutterFile: 'survey_viewmodel.dart:103-159',
      },
      {
        step: 2,
        action: 'View survey content',
        expectedResult: 'Survey title and questions are displayed',
        uiState: 'Survey title appears at top, followed by list of questions based on their types',
        flutterFile: 'survey_bottom_sheet.dart:88-100',
      },
    ],
    postconditions: ['Survey bottom sheet is displayed', 'User can interact with questions'],
    successCriteria: ['Bottom sheet appears', 'Survey content is visible', 'Questions are displayed correctly'],
    relatedTestCases: ['TC-SURVEY-001'],
  },
  {
    id: 'UC-SURVEY-002',
    title: 'Answer Single Choice Question',
    priority: 'High',
    userType: 'End User',
    description: 'User selects one option from multiple choices in a single choice question',
    preconditions: ['Survey bottom sheet is displayed', 'Survey contains single choice question'],
    steps: [
      {
        step: 1,
        action: 'View single choice question',
        expectedResult: 'Question with multiple choice options is displayed',
        uiState: 'Question text appears with radio buttons or selectable options',
        flutterFile: 'singlechoice_widget.dart',
      },
      {
        step: 2,
        action: 'Select an option',
        expectedResult: 'Option is selected and answer is stored',
        uiState: 'Selected option is highlighted, previous selection is cleared if another option is selected',
        flutterFile: 'survey_viewmodel.dart:163-194',
      },
      {
        step: 3,
        action: 'Deselect option by tapping again',
        expectedResult: 'Option is deselected and answer is removed',
        uiState: 'Selection is cleared, option returns to unselected state',
        flutterFile: 'survey_viewmodel.dart:174-180',
      },
    ],
    postconditions: ['Answer is stored in userAnswerList', 'UI reflects selection state'],
    successCriteria: ['Option can be selected', 'Only one option can be selected at a time', 'Selection can be cleared'],
    relatedTestCases: ['TC-SURVEY-002'],
  },
  {
    id: 'UC-SURVEY-003',
    title: 'Answer Multiple Choice Question',
    priority: 'High',
    userType: 'End User',
    description: 'User selects multiple options from choices in a multiple choice question',
    preconditions: ['Survey bottom sheet is displayed', 'Survey contains multiple choice question'],
    steps: [
      {
        step: 1,
        action: 'View multiple choice question',
        expectedResult: 'Question with multiple choice options is displayed',
        uiState: 'Question text appears with checkboxes or selectable options',
        flutterFile: 'multiplechoice_widget.dart',
      },
      {
        step: 2,
        action: 'Select multiple options',
        expectedResult: 'Each selected option is stored',
        uiState: 'Selected options are highlighted, multiple selections can be made',
        flutterFile: 'survey_viewmodel.dart:197-218',
      },
      {
        step: 3,
        action: 'Deselect an option',
        expectedResult: 'Option is removed from selection',
        uiState: 'Option is deselected, other selections remain',
        flutterFile: 'survey_viewmodel.dart:208-214',
      },
    ],
    postconditions: ['Multiple answers are stored in userAnswerList', 'UI reflects all selections'],
    successCriteria: ['Multiple options can be selected', 'Selections can be individually removed', 'All selections are stored'],
    relatedTestCases: ['TC-SURVEY-003'],
  },
  {
    id: 'UC-SURVEY-004',
    title: 'Answer Rating Question',
    priority: 'High',
    userType: 'End User',
    description: 'User provides a rating using star rating or numeric scale',
    preconditions: ['Survey bottom sheet is displayed', 'Survey contains rating question'],
    steps: [
      {
        step: 1,
        action: 'View rating question',
        expectedResult: 'Rating widget is displayed',
        uiState: 'Question text appears with star rating or numeric scale',
        flutterFile: 'rating_widget.dart',
      },
      {
        step: 2,
        action: 'Select a rating value',
        expectedResult: 'Rating is stored',
        uiState: 'Selected rating is highlighted, stars or scale reflect the selection',
        flutterFile: 'survey_viewmodel.dart:221-257',
      },
      {
        step: 3,
        action: 'Change rating',
        expectedResult: 'Previous rating is replaced with new rating',
        uiState: 'New rating is displayed, previous rating is cleared',
        flutterFile: 'survey_viewmodel.dart:244-256',
      },
      {
        step: 4,
        action: 'Set rating to 0',
        expectedResult: 'Rating is removed',
        uiState: 'Rating is cleared, no rating is selected',
        flutterFile: 'survey_viewmodel.dart:226-235',
      },
    ],
    postconditions: ['Rating value is stored in userAnswerList', 'UI reflects rating selection'],
    successCriteria: ['Rating can be selected', 'Rating can be changed', 'Rating can be cleared'],
    relatedTestCases: ['TC-SURVEY-004'],
  },
  {
    id: 'UC-SURVEY-005',
    title: 'Add Note to Question',
    priority: 'Medium',
    userType: 'End User',
    description: 'User adds additional notes or comments to a question',
    preconditions: ['Survey bottom sheet is displayed', 'Question has withNote enabled', 'User has answered the question'],
    steps: [
      {
        step: 1,
        action: 'Answer a question that supports notes',
        expectedResult: 'Note input field appears',
        uiState: 'Text input field appears below the question for additional notes',
        flutterFile: 'add_note_widget.dart',
      },
      {
        step: 2,
        action: 'Enter note text',
        expectedResult: 'Note is stored with the answer',
        uiState: 'Text is entered in the note field, note is associated with the question answer',
        flutterFile: 'survey_viewmodel.dart:260-274',
      },
      {
        step: 3,
        action: 'Modify note',
        expectedResult: 'Note is updated',
        uiState: 'Note text can be edited, updated note replaces previous note',
        flutterFile: 'survey_viewmodel.dart:260-274',
      },
    ],
    postconditions: ['Note is stored with answer', 'Note can be retrieved'],
    successCriteria: ['Note field appears', 'Note can be entered', 'Note is saved with answer'],
    relatedTestCases: ['TC-SURVEY-005'],
  },
  {
    id: 'UC-SURVEY-006',
    title: 'Submit Survey',
    priority: 'Critical',
    userType: 'End User',
    description: 'User submits completed survey answers',
    preconditions: ['Survey bottom sheet is displayed', 'User has answered at least one question'],
    steps: [
      {
        step: 1,
        action: 'Answer questions',
        expectedResult: 'Answers are collected',
        uiState: 'Answers are stored as user interacts with questions',
        flutterFile: 'survey_viewmodel.dart:163-274',
      },
      {
        step: 2,
        action: 'Tap Submit button',
        expectedResult: 'Survey is submitted',
        uiState: 'Loading indicator appears, submit button shows loading state',
        flutterFile: 'survey_submit_button.dart',
      },
      {
        step: 3,
        action: 'Wait for submission',
        expectedResult: 'Success dialog appears',
        uiState: 'Loading indicator disappears, success dialog shows "thank you for your time" message',
        flutterFile: 'survey_viewmodel.dart:338-358',
      },
      {
        step: 4,
        action: 'Survey is removed',
        expectedResult: 'Survey is removed from list and will not appear again',
        uiState: 'Bottom sheet closes, survey is removed from local storage',
        flutterFile: 'survey_viewmodel.dart:361-369',
      },
    ],
    postconditions: ['Survey is submitted', 'Survey is removed from list', 'User will not see this survey again'],
    successCriteria: ['Survey submits successfully', 'Success message appears', 'Survey is removed'],
    relatedTestCases: ['TC-SURVEY-006'],
  },
  {
    id: 'UC-SURVEY-007',
    title: 'Fetch Surveys from API',
    priority: 'High',
    userType: 'System',
    description: 'System fetches available surveys from API and stores them locally',
    preconditions: ['User is logged in', 'Network connection available'],
    steps: [
      {
        step: 1,
        action: 'Load surveys from local storage',
        expectedResult: 'Previously fetched surveys are loaded',
        uiState: 'Surveys are loaded from local storage',
        flutterFile: 'survey_viewmodel.dart:70-99',
      },
      {
        step: 2,
        action: 'Fetch new surveys from API',
        expectedResult: 'New surveys are fetched and added to list',
        uiState: 'API request is made, new surveys are received',
        flutterFile: 'survey_viewmodel.dart:88-95',
      },
      {
        step: 3,
        action: 'Store surveys locally',
        expectedResult: 'All surveys are stored in local storage',
        uiState: 'Surveys are saved to local storage for offline access',
        flutterFile: 'survey_viewmodel.dart:91-94',
      },
    ],
    postconditions: ['Surveys are available locally', 'Surveys can be displayed'],
    successCriteria: ['Surveys are fetched', 'Surveys are stored locally', 'Surveys are available for display'],
    relatedTestCases: ['TC-SURVEY-007'],
  },
  {
    id: 'UC-SURVEY-008',
    title: 'Handle Text-Only Questions',
    priority: 'Medium',
    userType: 'End User',
    description: 'Text-only questions are automatically added to answers when survey is displayed',
    preconditions: ['Survey bottom sheet is displayed', 'Survey contains text-only questions'],
    steps: [
      {
        step: 1,
        action: 'Survey is displayed',
        expectedResult: 'Text-only questions are automatically answered',
        uiState: 'Text-only questions appear in survey, they are automatically added to answer list',
        flutterFile: 'survey_viewmodel.dart:117-128',
      },
      {
        step: 2,
        action: 'View text-only question',
        expectedResult: 'Question text is displayed',
        uiState: 'Question text appears, no input field is shown',
        flutterFile: 'text_only_widget.dart',
      },
    ],
    postconditions: ['Text-only questions are in answer list', 'They are included in submission'],
    successCriteria: ['Text-only questions are displayed', 'They are automatically added to answers'],
    relatedTestCases: ['TC-SURVEY-008'],
  },
];

