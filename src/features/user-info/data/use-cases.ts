import { UseCase } from '@/lib/types';

export const userInfoUseCases: UseCase[] = [
  {
    id: 'UC-USER-INFO-001',
    title: 'Enter Personal Information',
    priority: 'Critical',
    userType: 'End User',
    description: 'User enters their personal information including name, gender, and city during registration',
    preconditions: ['User has completed phone number and OTP verification', 'User is on user info screen'],
    steps: [
      {
        step: 1,
        action: 'Open user info screen',
        expectedResult: 'User info form appears with name, gender, and city fields',
        uiState: 'Form displays with "Personal Info" title, name input field, gender selection buttons, and city dropdown',
        flutterFile: 'user_info_screen.dart:39-108',
      },
      {
        step: 2,
        action: 'Enter full name',
        expectedResult: 'Name is entered and validated in real-time',
        uiState: 'Name input field accepts text, validation occurs, Continue button enables when name is valid',
        flutterFile: 'name_section_widget.dart',
      },
      {
        step: 3,
        action: 'Select gender',
        expectedResult: 'Gender is selected and form validation updates',
        uiState: 'Gender button is highlighted, form validation updates, Continue button enables if other fields are valid',
        flutterFile: 'gender_section_widget.dart',
      },
      {
        step: 4,
        action: 'Select city',
        expectedResult: 'City is selected from dropdown and form validation updates',
        uiState: 'City dropdown shows selected city, form validation updates, Continue button enables if all fields are valid',
        flutterFile: 'user_info_screen.dart:377-434',
      },
      {
        step: 5,
        action: 'Tap Continue button',
        expectedResult: 'User info is updated and navigation occurs based on user flow',
        uiState: 'Loading indicator appears, then navigation occurs to next screen (friend invite, intro questions, or home)',
        flutterFile: 'user_info_viewmodel.dart:63-92',
      },
    ],
    postconditions: ['User info is saved', 'Navigation occurs based on user flow state'],
    successCriteria: ['Name is entered', 'Gender is selected', 'City is selected', 'Form is submitted successfully'],
    relatedTestCases: ['TC-USER-INFO-001'],
  },
  {
    id: 'UC-USER-INFO-002',
    title: 'Edit Existing User Information',
    priority: 'High',
    userType: 'End User',
    description: 'Existing user updates their personal information',
    preconditions: ['User is logged in', 'User has existing user info', 'User navigates to user info screen'],
    steps: [
      {
        step: 1,
        action: 'Open user info screen',
        expectedResult: 'Form is pre-filled with existing user information',
        uiState: 'Name field shows existing name, gender is pre-selected, city is pre-selected',
        flutterFile: 'user_info_viewmodel.dart:27-61',
      },
      {
        step: 2,
        action: 'Modify any field',
        expectedResult: 'Field is updated and form validation occurs',
        uiState: 'Modified field updates, validation occurs, Continue button state updates',
        flutterFile: 'user_info_viewmodel.dart:98-104',
      },
      {
        step: 3,
        action: 'Tap Continue button',
        expectedResult: 'Updated user info is saved',
        uiState: 'Loading indicator appears, then success navigation occurs',
        flutterFile: 'user_info_viewmodel.dart:63-92',
      },
    ],
    postconditions: ['User info is updated', 'Changes are saved'],
    successCriteria: ['Form is pre-filled', 'Changes can be made', 'Updates are saved'],
    relatedTestCases: ['TC-USER-INFO-002'],
  },
  {
    id: 'UC-USER-INFO-003',
    title: 'Navigate After User Info Submission',
    priority: 'High',
    userType: 'End User',
    description: 'User is navigated to appropriate screen after submitting user info',
    preconditions: ['User has submitted user info successfully'],
    steps: [
      {
        step: 1,
        action: 'User info is submitted successfully',
        expectedResult: 'System checks if user is new user',
        uiState: 'Loading indicator appears during submission',
        flutterFile: 'user_info_screen.dart:110-160',
      },
      {
        step: 2,
        action: 'If new user, show friend invite screen',
        expectedResult: 'Friend invite code screen appears',
        uiState: 'Navigation to friend invite screen occurs',
        flutterFile: 'user_info_screen.dart:123-127',
      },
      {
        step: 3,
        action: 'Check for intro questions',
        expectedResult: 'If intro questions exist, show intro questions screen',
        uiState: 'Navigation to intro questions screen occurs if questions exist',
        flutterFile: 'user_info_screen.dart:129-134',
      },
      {
        step: 4,
        action: 'Navigate to final destination',
        expectedResult: 'User navigates to home or cart based on flow',
        uiState: 'Navigation to home screen or cart screen occurs',
        flutterFile: 'user_info_screen.dart:136-159',
      },
    ],
    postconditions: ['User completes onboarding flow', 'User reaches appropriate destination'],
    successCriteria: ['Navigation occurs correctly', 'User reaches final destination'],
    relatedTestCases: ['TC-USER-INFO-003'],
  },
  {
    id: 'UC-USER-INFO-004',
    title: 'Form Validation',
    priority: 'High',
    userType: 'End User',
    description: 'Form validates all fields before allowing submission',
    preconditions: ['User is on user info screen'],
    steps: [
      {
        step: 1,
        action: 'Open user info screen',
        expectedResult: 'Continue button is disabled',
        uiState: 'Continue button is grayed out and disabled',
        flutterFile: 'user_info_screen.dart:293-324',
      },
      {
        step: 2,
        action: 'Enter invalid name',
        expectedResult: 'Name validation fails, Continue button remains disabled',
        uiState: 'Name field shows error or validation message, Continue button stays disabled',
        flutterFile: 'user_info_viewmodel.dart:98-104',
      },
      {
        step: 3,
        action: 'Enter valid name but leave gender unselected',
        expectedResult: 'Continue button remains disabled',
        uiState: 'Name is valid but Continue button stays disabled until gender is selected',
        flutterFile: 'user_info_viewmodel.dart:98-104',
      },
      {
        step: 4,
        action: 'Select gender but leave city unselected',
        expectedResult: 'Continue button remains disabled',
        uiState: 'Gender is selected but Continue button stays disabled until city is selected',
        flutterFile: 'user_info_viewmodel.dart:98-104',
      },
      {
        step: 5,
        action: 'Fill all required fields',
        expectedResult: 'Continue button becomes enabled',
        uiState: 'All fields are valid, Continue button becomes enabled and clickable',
        flutterFile: 'user_info_viewmodel.dart:98-104',
      },
    ],
    postconditions: ['Form validation works correctly', 'Continue button state reflects form validity'],
    successCriteria: ['Validation works for each field', 'Continue button enables when all fields are valid'],
    relatedTestCases: ['TC-USER-INFO-004'],
  },
  {
    id: 'UC-USER-INFO-005',
    title: 'Load Initial Data',
    priority: 'High',
    userType: 'End User',
    description: 'Screen loads cities, genders, and existing user info',
    preconditions: ['User navigates to user info screen'],
    steps: [
      {
        step: 1,
        action: 'Open user info screen',
        expectedResult: 'Loading indicator appears',
        uiState: 'Loading spinner is displayed while fetching data',
        flutterFile: 'user_info_viewmodel.dart:27-61',
      },
      {
        step: 2,
        action: 'Data loads successfully',
        expectedResult: 'Cities, genders, and user info are loaded',
        uiState: 'Loading indicator disappears, form appears with cities in dropdown, gender buttons, and pre-filled data if available',
        flutterFile: 'user_info_viewmodel.dart:27-61',
      },
      {
        step: 3,
        action: 'Language is set if user has preference',
        expectedResult: 'App language changes to user preference',
        uiState: 'App language updates if different from current language',
        flutterFile: 'user_info_screen.dart:81-97',
      },
    ],
    postconditions: ['All data is loaded', 'Form is ready for input'],
    successCriteria: ['Cities are loaded', 'Genders are loaded', 'User info is loaded if available'],
    relatedTestCases: ['TC-USER-INFO-005'],
  },
  {
    id: 'UC-USER-INFO-006',
    title: 'Handle Loading States',
    priority: 'Medium',
    userType: 'End User',
    description: 'App handles loading states during data fetching and submission',
    preconditions: ['User is on user info screen'],
    steps: [
      {
        step: 1,
        action: 'Open user info screen',
        expectedResult: 'Loading indicator appears while fetching initial data',
        uiState: 'Loading spinner is displayed',
        flutterFile: 'user_info_screen.dart:180-197',
      },
      {
        step: 2,
        action: 'Data loads successfully',
        expectedResult: 'Form appears',
        uiState: 'Loading indicator disappears, form is displayed',
        flutterFile: 'user_info_screen.dart:180-197',
      },
      {
        step: 3,
        action: 'Submit user info',
        expectedResult: 'Loading indicator appears during submission',
        uiState: 'Loading spinner appears, Continue button may show loading state',
        flutterFile: 'user_info_viewmodel.dart:73',
      },
      {
        step: 4,
        action: 'Submission completes',
        expectedResult: 'Navigation occurs',
        uiState: 'Loading indicator disappears, navigation occurs',
        flutterFile: 'user_info_viewmodel.dart:88-90',
      },
    ],
    postconditions: ['Loading states are shown appropriately', 'User sees progress feedback'],
    successCriteria: ['Loading indicators appear', 'Loading states are clear'],
    relatedTestCases: ['TC-USER-INFO-006'],
  },
  {
    id: 'UC-USER-INFO-007',
    title: 'Error Handling',
    priority: 'High',
    userType: 'End User',
    description: 'App handles errors during data loading and submission',
    preconditions: ['User is on user info screen'],
    steps: [
      {
        step: 1,
        action: 'Initial data fails to load',
        expectedResult: 'Error message appears with retry option',
        uiState: 'Error widget appears showing error message and retry button',
        flutterFile: 'user_info_screen.dart:188-206',
      },
      {
        step: 2,
        action: 'Tap retry button',
        expectedResult: 'Data loading is retried',
        uiState: 'Loading indicator appears, then data loads or error appears again',
        flutterFile: 'user_info_screen.dart:202-205',
      },
      {
        step: 3,
        action: 'Submission fails',
        expectedResult: 'Error dialog appears',
        uiState: 'Error dialog shows error message, user can dismiss and retry',
        flutterFile: 'user_info_screen.dart:56-67',
      },
    ],
    postconditions: ['Errors are handled gracefully', 'User can retry failed operations'],
    successCriteria: ['Error messages are clear', 'Retry options are available'],
    relatedTestCases: ['TC-USER-INFO-007'],
  },
  {
    id: 'UC-USER-INFO-008',
    title: 'Language Preference Update',
    priority: 'Medium',
    userType: 'End User',
    description: 'App language updates based on user preference from user info',
    preconditions: ['User has language preference in user info', 'User info is loaded'],
    steps: [
      {
        step: 1,
        action: 'User info loads with language preference',
        expectedResult: 'System checks if language differs from current',
        uiState: 'Language preference is retrieved from user info',
        flutterFile: 'user_info_screen.dart:81-97',
      },
      {
        step: 2,
        action: 'Language differs from current',
        expectedResult: 'App language changes to user preference',
        uiState: 'App language updates, UI text changes to new language',
        flutterFile: 'user_info_screen.dart:90-95',
      },
    ],
    postconditions: ['App language matches user preference'],
    successCriteria: ['Language is updated correctly', 'UI reflects new language'],
    relatedTestCases: ['TC-USER-INFO-008'],
  },
];

