import { TestCase } from '@/lib/types';

export const walletTestCases: TestCase[] = [
  {
    id: 'TC-WALLET-001',
    title: 'Open Wallet Screen',
    whatYoureTesting: 'Verify that wallet screen opens and displays balance correctly',
    whyItMatters: 'Users need to see their wallet balance immediately when opening the wallet screen. The screen must load correctly.',
    estimatedTime: '30 seconds',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-WALLET-001'],
    relatedEdgeCases: ['EC-WALLET-001', 'EC-WALLET-002'],
    testSteps: [
      {
        step: 1,
        instruction: 'Navigate to wallet screen',
        detailedSteps: [
          '1. Open the app and log in',
          '2. Navigate to wallet screen from bottom navigation or menu',
        ],
        whatYouShouldSee: 'The wallet screen opens showing a collapsible balance section at the top. The balance section is expanded by default, showing a white card with rounded corners on a gradient background (orange to deep orange). The card displays "Your Balance" text with a wallet icon, followed by the balance amount in large numbers and the currency code (e.g., "100.00 EGP"). There is an "Active" status pill showing a green dot.',
        expectedResult: 'Wallet screen opens with balance section expanded',
      },
      {
        step: 2,
        instruction: 'Wait for wallet data to load',
        detailedSteps: [
          '1. Observe the screen',
          '2. Wait for loading to complete',
        ],
        whatYouShouldSee: 'If wallet data is loading, you see a loading spinner in the center of the screen. Once loaded, the balance card appears with your actual balance amount. The balance updates smoothly.',
        expectedResult: 'Balance loads and displays correctly',
      },
    ],
    preconditions: [
      'User is logged in',
      'User has at least one wallet card',
      'Network connection is available',
    ],
    testData: 'User wallet with balance',
    automatable: true,
    status: 'Not Started',
    notes: 'Balance should match server data',
    successChecklist: [
      '✓ Screen opens successfully',
      '✓ Balance section is visible',
      '✓ Balance amount is correct',
      '✓ Currency code is displayed',
    ],
  },
  {
    id: 'TC-WALLET-002',
    title: 'Collapse and Expand Balance Section',
    whatYoureTesting: 'Verify that balance section collapses and expands smoothly when scrolling',
    whyItMatters: 'Users need to access restaurant list below. The collapse animation must work smoothly.',
    estimatedTime: '30 seconds',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: ['UC-WALLET-001'],
    relatedEdgeCases: [],
    testSteps: [
      {
        step: 1,
        instruction: 'Scroll down on wallet screen',
        detailedSteps: [
          '1. Start with balance section expanded',
          '2. Swipe up to scroll down',
        ],
        whatYouShouldSee: 'As you scroll down, the balance section starts to collapse smoothly. The balance card gradually disappears, and the app bar title "beepay" becomes visible. The background gradient remains visible. The animation is smooth without any jumps or glitches.',
        expectedResult: 'Balance section collapses on scroll',
      },
      {
        step: 2,
        instruction: 'Scroll back up',
        detailedSteps: [
          '1. Swipe down to scroll back up',
          '2. Continue scrolling until top',
        ],
        whatYouShouldSee: 'As you scroll back up, the balance section expands again smoothly. The balance card reappears with the full balance amount and all details. The animation is smooth and natural.',
        expectedResult: 'Balance section expands on scroll up',
      },
    ],
    preconditions: [
      'Wallet screen is open',
      'Balance section is expanded',
    ],
    testData: 'N/A',
    automatable: false,
    status: 'Not Started',
    notes: 'Animation should be smooth and responsive',
    successChecklist: [
      '✓ Balance section collapses smoothly',
      '✓ Balance section expands smoothly',
      '✓ No animation glitches',
      '✓ App bar title appears correctly',
    ],
  },
  {
    id: 'TC-WALLET-003',
    title: 'Open Payment Section',
    whatYoureTesting: 'Verify that tapping Pay button opens payment section with PIN input',
    whyItMatters: 'Users need to pay invoices easily. The payment section must open correctly.',
    estimatedTime: '30 seconds',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-WALLET-002'],
    relatedEdgeCases: ['EC-WALLET-003'],
    testSteps: [
      {
        step: 1,
        instruction: 'Tap the floating "Pay" button',
        detailedSteps: [
          '1. Locate the floating action button at bottom right with "Pay" text and payment icon',
          '2. Tap on the button',
        ],
        whatYouShouldSee: 'A payment section slides up smoothly from the bottom of the screen. It appears as an overlay on top of the wallet screen. The section has a white background with rounded top corners. Inside, you see a title "Pay Invoice" or similar, and a PIN input field with 4 boxes for entering digits. There is also a close button (X) at the top right.',
        expectedResult: 'Payment section opens with PIN input',
      },
      {
        step: 2,
        instruction: 'Verify payment section elements',
        detailedSteps: [
          '1. Check if PIN input field is visible',
          '2. Check if close button is visible',
        ],
        whatYouShouldSee: 'The PIN input field shows 4 empty boxes side by side. Each box is ready to receive a digit. The close button (X) is visible at the top right corner. The section is fully visible and not cut off.',
        expectedResult: 'All payment section elements are visible',
      },
    ],
    preconditions: [
      'User is logged in',
      'Wallet screen is open',
      'Floating Pay button is visible',
    ],
    testData: 'N/A',
    automatable: true,
    status: 'Not Started',
    notes: 'Animation should be smooth',
    successChecklist: [
      '✓ Payment section opens',
      '✓ PIN input is visible',
      '✓ Close button is visible',
      '✓ Animation is smooth',
    ],
  },
  {
    id: 'TC-WALLET-004',
    title: 'Enter PIN and Validate Invoice',
    whatYoureTesting: 'Verify that entering PIN validates invoice and navigates to invoice details',
    whyItMatters: 'Users need to pay invoices by entering PIN. Validation must work correctly.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-WALLET-002'],
    relatedEdgeCases: ['EC-WALLET-004', 'EC-WALLET-005'],
    testSteps: [
      {
        step: 1,
        instruction: 'Enter 4-digit PIN',
        detailedSteps: [
          '1. Tap on the PIN input field',
          '2. Enter 4 digits (e.g., 1234)',
        ],
        whatYouShouldSee: 'As you type each digit, it appears in the corresponding box. The digits are shown clearly. After entering 4 digits, all boxes are filled.',
        expectedResult: 'PIN is entered correctly',
      },
      {
        step: 2,
        instruction: 'Tap check button',
        detailedSteps: [
          '1. Locate the check button (checkmark icon)',
          '2. Tap on it',
        ],
        whatYouShouldSee: 'The check button slides smoothly to the right (or left in RTL). Then, the PIN input field slides in from the opposite side. This creates a smooth animation effect. The PIN input remains visible.',
        expectedResult: 'Animation plays and PIN input becomes visible',
      },
      {
        step: 3,
        instruction: 'Wait for invoice validation',
        detailedSteps: [
          '1. Observe the screen',
          '2. Wait for validation to complete',
        ],
        whatYouShouldSee: 'A loading indicator appears while the app checks the invoice with the server. The loading spinner is visible. After a moment, if the invoice is found, you are automatically taken to the invoice details screen. If the invoice is not found, an error message appears.',
        expectedResult: 'Invoice is validated and user navigates to details screen',
      },
    ],
    preconditions: [
      'Payment section is open',
      'User has a valid invoice PIN',
      'Network connection is available',
    ],
    testData: 'Valid invoice PIN/OTP',
    automatable: true,
    status: 'Not Started',
    notes: 'PIN should be exactly 4 digits',
    successChecklist: [
      '✓ PIN is entered correctly',
      '✓ Animation plays smoothly',
      '✓ Invoice validation works',
      '✓ Navigation to invoice details works',
    ],
  },
  {
    id: 'TC-WALLET-005',
    title: 'Handle Invalid PIN',
    whatYoureTesting: 'Verify that entering invalid PIN shows appropriate error message',
    whyItMatters: 'Users may enter wrong PIN. Error handling must be clear and helpful.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: ['UC-WALLET-002'],
    relatedEdgeCases: ['EC-WALLET-004'],
    testSteps: [
      {
        step: 1,
        instruction: 'Enter invalid PIN (less than 4 digits)',
        detailedSteps: [
          '1. Open payment section',
          '2. Enter only 3 digits (e.g., 123)',
          '3. Tap check button',
        ],
        whatYouShouldSee: 'An error message appears below or near the PIN input field. The message says something like "Please enter 4 digits" in red text. The PIN input field may show a red border or highlight to indicate the error.',
        expectedResult: 'Error message appears for incomplete PIN',
      },
      {
        step: 2,
        instruction: 'Enter invalid PIN (invoice not found)',
        detailedSteps: [
          '1. Enter 4 digits that do not match any invoice (e.g., 9999)',
          '2. Tap check button',
          '3. Wait for validation',
        ],
        whatYouShouldSee: 'A loading indicator appears while checking. After a moment, an error message appears saying "Invoice not found" or similar. The message is displayed clearly, and you can try again by entering a different PIN.',
        expectedResult: 'Error message appears for invalid invoice',
      },
    ],
    preconditions: [
      'Payment section is open',
      'User enters invalid PIN',
      'Network connection is available',
    ],
    testData: 'Invalid PIN (incomplete or non-existent invoice)',
    automatable: true,
    status: 'Not Started',
    notes: 'Error messages should be clear and helpful',
    successChecklist: [
      '✓ Error message appears for incomplete PIN',
      '✓ Error message appears for invalid invoice',
      '✓ User can retry after error',
      '✓ Error message is clear',
    ],
  },
  {
    id: 'TC-WALLET-006',
    title: 'Top Up Wallet',
    whatYoureTesting: 'Verify that top-up functionality works correctly',
    whyItMatters: 'Users need to add funds to their wallet. Top-up must work reliably.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-WALLET-003'],
    relatedEdgeCases: ['EC-WALLET-006'],
    testSteps: [
      {
        step: 1,
        instruction: 'Tap "Top Up Wallet" button',
        detailedSteps: [
          '1. Locate the "Top Up Wallet" button in the balance section',
          '2. Tap on it',
        ],
        whatYouShouldSee: 'You are navigated to the wallet store page. The page shows options for adding funds to your wallet. The page loads correctly.',
        expectedResult: 'User navigates to wallet store',
      },
      {
        step: 2,
        instruction: 'Process top-up with top-up key',
        detailedSteps: [
          '1. Obtain a top-up key (from QR scan or manual entry)',
          '2. Enter or scan the top-up key',
          '3. Confirm top-up',
        ],
        whatYouShouldSee: 'A loading bottom sheet appears with a message "Processing topup" and a loading spinner. The bottom sheet covers the screen with a semi-transparent background. After processing, a success message appears saying the top-up was successful, and your wallet balance updates to show the new amount.',
        expectedResult: 'Top-up processes successfully and balance updates',
      },
    ],
    preconditions: [
      'User is logged in',
      'User has a valid top-up key',
      'Network connection is available',
    ],
    testData: 'Valid top-up key',
    automatable: true,
    status: 'Not Started',
    notes: 'Balance should update immediately after top-up',
    successChecklist: [
      '✓ Navigation to wallet store works',
      '✓ Top-up processes successfully',
      '✓ Success message appears',
      '✓ Balance updates correctly',
    ],
  },
  {
    id: 'TC-WALLET-007',
    title: 'View Transaction History',
    whatYoureTesting: 'Verify that transaction history loads and displays correctly',
    whyItMatters: 'Users need to see their transaction history. Transactions must load and display correctly.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: ['UC-WALLET-004'],
    relatedEdgeCases: ['EC-WALLET-007'],
    testSteps: [
      {
        step: 1,
        instruction: 'Tap on balance card',
        detailedSteps: [
          '1. Locate the balance card in the wallet screen',
          '2. Tap on it',
        ],
        whatYouShouldSee: 'You are navigated to the transaction screen. The screen shows the wallet card background at the top with your balance displayed prominently. Below that, you see a date picker showing the current date range (default is today), and below that is a list of transactions.',
        expectedResult: 'Transaction screen opens',
      },
      {
        step: 2,
        instruction: 'Wait for transactions to load',
        detailedSteps: [
          '1. Observe the screen',
          '2. Wait for loading to complete',
        ],
        whatYouShouldSee: 'A loading indicator appears while fetching transactions. Once loaded, transactions are displayed in a scrollable list. Each transaction shows the date, amount (with + or - sign), description, and other details. Transactions are ordered by date, newest first.',
        expectedResult: 'Transactions load and display correctly',
      },
    ],
    preconditions: [
      'User is logged in',
      'User has wallet with transactions',
      'Network connection is available',
    ],
    testData: 'User wallet with transaction history',
    automatable: true,
    status: 'Not Started',
    notes: 'Transactions should be accurate and up-to-date',
    successChecklist: [
      '✓ Transaction screen opens',
      '✓ Transactions load successfully',
      '✓ Transaction details are correct',
      '✓ List is scrollable',
    ],
  },
  {
    id: 'TC-WALLET-008',
    title: 'Filter Transactions by Date Range',
    whatYoureTesting: 'Verify that date filtering works correctly for transactions',
    whyItMatters: 'Users need to filter transactions by date. Date filtering must work accurately.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: ['UC-WALLET-004'],
    relatedEdgeCases: ['EC-WALLET-008'],
    testSteps: [
      {
        step: 1,
        instruction: 'Select date range using date picker',
        detailedSteps: [
          '1. Locate the date picker widget above the transaction list',
          '2. Tap on it to open date selection',
          '3. Select a different date range (e.g., last week)',
        ],
        whatYouShouldSee: 'A date picker opens allowing you to select a start date and end date. You can choose dates by tapping on the calendar. After selecting dates, the picker closes and shows the selected date range.',
        expectedResult: 'Date range is selected',
      },
      {
        step: 2,
        instruction: 'Wait for transactions to refresh',
        detailedSteps: [
          '1. Observe the transaction list',
          '2. Wait for refresh to complete',
        ],
        whatYouShouldSee: 'The transaction list refreshes automatically. A loading indicator appears briefly while fetching filtered transactions. After loading, only transactions within the selected date range are displayed. Transactions outside the range are hidden.',
        expectedResult: 'Transactions are filtered by date range',
      },
    ],
    preconditions: [
      'Transaction screen is open',
      'User has transactions in different date ranges',
      'Network connection is available',
    ],
    testData: 'Transactions across different dates',
    automatable: false,
    status: 'Not Started',
    notes: 'Date filtering should be accurate',
    successChecklist: [
      '✓ Date picker works correctly',
      '✓ Transactions refresh after date selection',
      '✓ Only transactions in date range are shown',
      '✓ Filtering is accurate',
    ],
  },
  {
    id: 'TC-WALLET-009',
    title: 'Load More Transactions on Scroll',
    whatYoureTesting: 'Verify that pagination works for transaction list',
    whyItMatters: 'Users may have many transactions. Pagination must work smoothly.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: ['UC-WALLET-004'],
    relatedEdgeCases: ['EC-WALLET-009'],
    testSteps: [
      {
        step: 1,
        instruction: 'Scroll down to bottom of transaction list',
        detailedSteps: [
          '1. View the transaction list',
          '2. Swipe up to scroll down',
          '3. Continue scrolling until you reach the bottom',
        ],
        whatYouShouldSee: 'As you scroll down, when you get close to the bottom, a loading indicator appears at the bottom of the list. It shows that more transactions are being loaded. The indicator appears smoothly without interrupting scrolling.',
        expectedResult: 'Loading indicator appears at bottom',
      },
      {
        step: 2,
        instruction: 'Wait for more transactions to load',
        detailedSteps: [
          '1. Wait for the loading indicator to disappear',
          '2. Check if new transactions appear',
        ],
        whatYouShouldSee: 'After a moment, more transactions appear below the ones you already saw. The new transactions are added to the list seamlessly. You can continue scrolling to see more. The loading indicator disappears once loading is complete.',
        expectedResult: 'More transactions are loaded',
      },
    ],
    preconditions: [
      'Transaction screen is open',
      'User has more than one page of transactions',
      'Network connection is available',
    ],
    testData: 'Multiple pages of transactions',
    automatable: true,
    status: 'Not Started',
    notes: 'Pagination should work smoothly',
    successChecklist: [
      '✓ Loading indicator appears on scroll',
      '✓ More transactions load automatically',
      '✓ No duplicate transactions',
      '✓ Scrolling remains smooth',
    ],
  },
  {
    id: 'TC-WALLET-010',
    title: 'Pay Invoice from Transaction Screen',
    whatYoureTesting: 'Verify that paying invoice from transaction screen works correctly',
    whyItMatters: 'Users need to pay invoices easily. Payment flow must work correctly.',
    estimatedTime: '2 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-WALLET-005'],
    relatedEdgeCases: ['EC-WALLET-010'],
    testSteps: [
      {
        step: 1,
        instruction: 'Enter invoice PIN in transaction screen',
        detailedSteps: [
          '1. Locate the invoice PIN input field in transaction screen',
          '2. Enter 4-digit PIN',
        ],
        whatYouShouldSee: 'The PIN input field accepts your digits. Each digit appears as you type. The field is clearly visible.',
        expectedResult: 'PIN is entered',
      },
      {
        step: 2,
        instruction: 'Tap validate button',
        detailedSteps: [
          '1. Locate the validate button',
          '2. Tap on it',
        ],
        whatYouShouldSee: 'A loading indicator appears while the app checks the invoice. After validation, if the invoice is found, you are navigated to the invoice details screen.',
        expectedResult: 'Invoice is validated and details screen opens',
      },
      {
        step: 3,
        instruction: 'Select tip amount and confirm payment',
        detailedSteps: [
          '1. Review invoice details',
          '2. Select a tip amount (if applicable)',
          '3. Tap confirm payment button',
        ],
        whatYouShouldSee: 'Tip options are displayed (e.g., 0%, 5%, 10%, 15%). You can select one by tapping. After selecting tip and confirming payment, a loading indicator appears. Then, a success dialog appears showing a happy mascot icon and "Invoice paid" message. After a few seconds, you are redirected to the home screen.',
        expectedResult: 'Payment is processed and success screen is shown',
      },
    ],
    preconditions: [
      'User is logged in',
      'User has wallet with sufficient balance',
      'User has valid invoice PIN',
      'Network connection is available',
    ],
    testData: 'Valid invoice PIN and sufficient balance',
    automatable: true,
    status: 'Not Started',
    notes: 'Balance should be deducted correctly',
    successChecklist: [
      '✓ Invoice validation works',
      '✓ Invoice details screen opens',
      '✓ Tip selection works',
      '✓ Payment processes successfully',
      '✓ Success screen is displayed',
      '✓ Balance is updated',
    ],
  },
  {
    id: 'TC-WALLET-011',
    title: 'Browse Restaurants for Dine-In',
    whatYoureTesting: 'Verify that restaurant list and map view work correctly',
    whyItMatters: 'Users need to find restaurants that accept wallet payment. Restaurant browsing must work correctly.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: ['UC-WALLET-006'],
    relatedEdgeCases: ['EC-WALLET-011'],
    testSteps: [
      {
        step: 1,
        instruction: 'Scroll down past balance section',
        detailedSteps: [
          '1. Start on wallet screen',
          '2. Scroll down past the balance section',
        ],
        whatYouShouldSee: 'Below the balance section, you see restaurant category tabs (e.g., "All", "Fast Food", "Fine Dining"). Below the tabs is a list of restaurant cards. Each card shows restaurant image, name, rating, and other details. There is also a toggle button to switch between list and map view.',
        expectedResult: 'Restaurant list is displayed',
      },
      {
        step: 2,
        instruction: 'Select a restaurant category tab',
        detailedSteps: [
          '1. Tap on a category tab (e.g., "Fast Food")',
          '2. Observe the restaurant list',
        ],
        whatYouShouldSee: 'The selected tab is highlighted with the primary color. The restaurant list updates to show only restaurants in that category. The list refreshes smoothly.',
        expectedResult: 'Restaurant list filters by category',
      },
      {
        step: 3,
        instruction: 'Toggle to map view',
        detailedSteps: [
          '1. Locate the view toggle button (list/map icons)',
          '2. Tap on the map icon',
        ],
        whatYouShouldSee: 'The view switches from list to map. A map appears showing restaurant locations as markers. You can zoom in/out and tap on markers to see restaurant details. The map loads correctly.',
        expectedResult: 'Map view is displayed',
      },
    ],
    preconditions: [
      'User is logged in',
      'Wallet screen is open',
      'Restaurants are available',
      'Network connection is available',
    ],
    testData: 'Restaurant data',
    automatable: false,
    status: 'Not Started',
    notes: 'Map view requires location permission',
    successChecklist: [
      '✓ Restaurant list loads',
      '✓ Category filtering works',
      '✓ List view displays correctly',
      '✓ Map view displays correctly',
      '✓ View toggle works',
    ],
  },
  {
    id: 'TC-WALLET-012',
    title: 'Handle Guest User',
    whatYoureTesting: 'Verify that guest users see login prompt',
    whyItMatters: 'Guest users should be prompted to log in before accessing wallet.',
    estimatedTime: '30 seconds',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: [],
    relatedEdgeCases: ['EC-WALLET-012'],
    testSteps: [
      {
        step: 1,
        instruction: 'Open wallet screen as guest user',
        detailedSteps: [
          '1. Log out if logged in',
          '2. Navigate to wallet screen',
        ],
        whatYouShouldSee: 'Instead of the wallet screen, you see a guest login prompt. The prompt shows a message asking you to log in to access your wallet. There is a "Login" or "Sign In" button that you can tap to go to the login screen.',
        expectedResult: 'Guest login prompt is displayed',
      },
    ],
    preconditions: [
      'User is not logged in (guest)',
    ],
    testData: 'N/A',
    automatable: true,
    status: 'Not Started',
    notes: 'Guest users should not see wallet data',
    successChecklist: [
      '✓ Guest login prompt is displayed',
      '✓ Login button is visible',
      '✓ Navigation to login works',
    ],
  },
  {
    id: 'TC-WALLET-013',
    title: 'View First Visit Explanation',
    whatYoureTesting: 'Verify that first visit explanation appears only once',
    whyItMatters: 'New users need to understand the wallet feature. Explanation should appear only on first visit.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P2',
    relatedUseCases: ['UC-WALLET-008'],
    relatedEdgeCases: [],
    testSteps: [
      {
        step: 1,
        instruction: 'Open wallet screen for first time',
        detailedSteps: [
          '1. Log in with a new account or clear app data',
          '2. Navigate to wallet screen for the first time',
        ],
        whatYouShouldSee: 'The wallet screen loads normally. After a short delay (about 800 milliseconds), a bottom sheet slides up from the bottom. The bottom sheet shows HTML content with "Welcome to beepay" title and explains how the wallet feature works. The content is readable and well-formatted.',
        expectedResult: 'Explanation bottom sheet appears',
      },
      {
        step: 2,
        instruction: 'Close explanation and reopen wallet screen',
        detailedSteps: [
          '1. Close the explanation bottom sheet',
          '2. Navigate away from wallet screen',
          '3. Return to wallet screen',
        ],
        whatYouShouldSee: 'The wallet screen opens normally, but the explanation bottom sheet does not appear again. The screen loads directly without showing the explanation.',
        expectedResult: 'Explanation does not appear again',
      },
    ],
    preconditions: [
      'User is logged in',
      'User is visiting wallet screen for the first time',
      'Explanation HTML content is available',
    ],
    testData: 'First visit flag',
    automatable: true,
    status: 'Not Started',
    notes: 'Flag should be saved in local storage',
    successChecklist: [
      '✓ Explanation appears on first visit',
      '✓ Explanation does not appear again',
      '✓ HTML content displays correctly',
      '✓ Flag is saved correctly',
    ],
  },
];

