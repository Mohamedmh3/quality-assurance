import type { UseCase } from '../types';

export const friendInviteUseCases: UseCase[] = [
  {
    id: 'UC-FRIEND-INVITE-001',
    title: 'Open Friend Invite Code Screen',
    priority: 'Critical',
    userType: 'End User',
    description: 'When a new user signs up or during onboarding, they can access the friend invite code screen to enter a referral code from a friend.',
    preconditions: [
      'User is in registration or onboarding flow',
      'Friend invite code screen is accessible',
    ],
    steps: [
      {
        step: 1,
        action: 'App navigates to friend invite code screen',
        expectedResult: 'Screen displays with invite code input field',
        uiState: 'Friend invite code screen shown with input field and apply button',
        flutterFile: 'add_invite_friend_code_screen.dart:35-79',
      },
      {
        step: 2,
        action: 'App displays invite code input field and instructions',
        expectedResult: 'Input field, instructions, and skip option visible',
        uiState: 'Screen shows code input, hints, and skip button',
        flutterFile: 'add_invite_friend_code_screen.dart:119-276',
      },
    ],
    postconditions: [
      'Friend invite code screen is displayed',
      'Input field is ready for code entry',
      'Apply button is disabled until valid code entered',
      'Skip option is available',
    ],
    successCriteria: [
      'Screen loads without errors',
      'Input field is accessible',
      'Instructions are clear',
      'Skip option works',
    ],
    relatedTestCases: ['TC-FRIEND-INVITE-001', 'TC-FRIEND-INVITE-002'],
  },
  {
    id: 'UC-FRIEND-INVITE-002',
    title: 'Enter Friend Invite Code',
    priority: 'Critical',
    userType: 'End User',
    description: 'User enters a friend\'s invite code in the input field. The code is validated as they type.',
    preconditions: [
      'Friend invite code screen is open',
      'User has a friend\'s invite code',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps on invite code input field',
        expectedResult: 'Keyboard appears and input field is focused',
        uiState: 'Input field highlights, keyboard shows',
        flutterFile: 'code_section_widget.dart:22-52',
      },
      {
        step: 2,
        action: 'User types invite code',
        expectedResult: 'Code appears in input field',
        uiState: 'Text appears in input field as user types',
        flutterFile: 'code_section_widget.dart:40',
      },
      {
        step: 3,
        action: 'App validates code as user types',
        expectedResult: 'Code validation state updated',
        uiState: 'Apply button enables when code is valid',
        flutterFile: 'add_invite_friend_code_viewmodel.dart:20-22',
      },
    ],
    postconditions: [
      'Code entered in input field',
      'Code validation state updated',
      'Apply button enabled if code is valid',
    ],
    successCriteria: [
      'Input accepts code',
      'Validation works correctly',
      'Apply button state updates',
      'Code format is validated',
    ],
    relatedTestCases: ['TC-FRIEND-INVITE-003', 'TC-FRIEND-INVITE-004'],
  },
  {
    id: 'UC-FRIEND-INVITE-003',
    title: 'Apply Friend Invite Code',
    priority: 'Critical',
    userType: 'End User',
    description: 'User applies a valid friend invite code to receive referral rewards or benefits.',
    preconditions: [
      'Friend invite code screen is open',
      'Valid invite code is entered',
      'Apply button is enabled',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps Apply button',
        expectedResult: 'Code submission initiated',
        uiState: 'Loading indicator appears, button disabled',
        flutterFile: 'add_invite_friend_code_screen.dart:212-250',
      },
      {
        step: 2,
        action: 'App validates code is not empty',
        expectedResult: 'Code validation passes',
        uiState: 'Validation check performed',
        flutterFile: 'add_invite_friend_code_viewmodel.dart:24-37',
      },
      {
        step: 3,
        action: 'App sends apply invite code request to API',
        expectedResult: 'API request sent with code',
        uiState: 'Loading state active',
        flutterFile: 'add_invite_friend_code_viewmodel.dart:39-47',
      },
      {
        step: 4,
        action: 'App receives success response',
        expectedResult: 'Code applied successfully',
        uiState: 'Success state, navigation triggered',
        flutterFile: 'add_invite_friend_code_screen.dart:60-67',
      },
      {
        step: 5,
        action: 'App handles navigation after success',
        expectedResult: 'User navigated to next screen',
        uiState: 'Screen transitions based on flow',
        flutterFile: 'add_invite_friend_code_screen.dart:81-116',
      },
    ],
    postconditions: [
      'Invite code applied successfully',
      'User receives rewards or benefits',
      'Navigation occurs to next screen',
      'Success state handled',
    ],
    successCriteria: [
      'Code applies successfully',
      'API call succeeds',
      'Rewards granted',
      'Navigation works correctly',
    ],
    relatedTestCases: ['TC-FRIEND-INVITE-005', 'TC-FRIEND-INVITE-006'],
  },
  {
    id: 'UC-FRIEND-INVITE-004',
    title: 'Skip Friend Invite Code',
    priority: 'High',
    userType: 'End User',
    description: 'User can skip entering a friend invite code and continue with registration or onboarding.',
    preconditions: [
      'Friend invite code screen is open',
      'User does not have a friend invite code',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps Skip button',
        expectedResult: 'Skip action triggered',
        uiState: 'Skip button responds to tap',
        flutterFile: 'add_invite_friend_code_screen.dart:254-270',
      },
      {
        step: 2,
        action: 'App handles skip navigation',
        expectedResult: 'Navigation logic executed',
        uiState: 'Screen transitions',
        flutterFile: 'add_invite_friend_code_screen.dart:278-313',
      },
      {
        step: 3,
        action: 'App checks for intro questions',
        expectedResult: 'Intro questions check performed',
        uiState: 'Know Us screen shown if needed',
        flutterFile: 'add_invite_friend_code_screen.dart:281-287',
      },
      {
        step: 4,
        action: 'App navigates based on flow state',
        expectedResult: 'User navigated to appropriate screen',
        uiState: 'Navigation to home or cart based on context',
        flutterFile: 'add_invite_friend_code_screen.dart:289-312',
      },
    ],
    postconditions: [
      'Friend invite code skipped',
      'User continues with flow',
      'Navigation occurs',
      'No code applied',
    ],
    successCriteria: [
      'Skip button works',
      'Navigation occurs correctly',
      'Flow continues normally',
      'No errors occur',
    ],
    relatedTestCases: ['TC-FRIEND-INVITE-007', 'TC-FRIEND-INVITE-008'],
  },
  {
    id: 'UC-FRIEND-INVITE-005',
    title: 'Handle Invalid Friend Invite Code',
    priority: 'High',
    userType: 'End User',
    description: 'When user enters an invalid or expired invite code, the app displays an error message.',
    preconditions: [
      'Friend invite code screen is open',
      'User enters invalid code',
    ],
    steps: [
      {
        step: 1,
        action: 'User enters invalid code and taps Apply',
        expectedResult: 'Code validation fails',
        uiState: 'Error state triggered',
        flutterFile: 'add_invite_friend_code_viewmodel.dart:24-37',
      },
      {
        step: 2,
        action: 'App receives error from API',
        expectedResult: 'Error response received',
        uiState: 'Error state set',
        flutterFile: 'add_invite_friend_code_viewmodel.dart:43-45',
      },
      {
        step: 3,
        action: 'App displays error message',
        expectedResult: 'Error dialog shown to user',
        uiState: 'Error message dialog displayed',
        flutterFile: 'add_invite_friend_code_screen.dart:46-56',
      },
    ],
    postconditions: [
      'Error message displayed',
      'User can retry with different code',
      'Input field remains accessible',
      'Apply button re-enabled',
    ],
    successCriteria: [
      'Error handled gracefully',
      'Error message is clear',
      'User can retry',
      'No app crash',
    ],
    relatedTestCases: ['TC-FRIEND-INVITE-009', 'TC-FRIEND-INVITE-010'],
  },
];


