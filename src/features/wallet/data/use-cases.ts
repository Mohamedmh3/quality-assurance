import { UseCase } from '@/lib/types';

export const walletUseCases: UseCase[] = [
  {
    id: 'UC-WALLET-001',
    title: 'View Wallet Balance',
    description: 'User wants to see their wallet balance and wallet cards',
    priority: 'High',
    userType: 'End User',
    preconditions: [
      'User is logged in',
      'User has at least one wallet card',
      'Network connection is available',
    ],
    steps: [
      {
        step: 1,
        action: 'User navigates to wallet screen',
        expectedResult: 'Wallet screen opens showing collapsible balance section with total balance',
        uiState: 'Balance section is expanded showing balance card with total amount and currency',
      },
      {
        step: 2,
        action: 'App fetches user wallet list from server',
        expectedResult: 'Loading spinner appears while fetching wallet data',
        uiState: 'Loading spinner is visible',
      },
      {
        step: 3,
        action: 'Server returns wallet list with balance information',
        expectedResult: 'Balance card displays total balance with currency code and active status',
        uiState: 'Balance card shows balance amount, currency, and "Active" status pill',
      },
      {
        step: 4,
        action: 'User scrolls down',
        expectedResult: 'Balance section collapses and shows "beepay" title in app bar',
        uiState: 'App bar shows "beepay" title, balance section is collapsed',
      },
    ],
    postconditions: [
      'User can see their wallet balance',
      'User can see active wallet status',
      'Balance section can be collapsed/expanded',
    ],
    successCriteria: [
      'Balance loads successfully',
      'Balance displays correct amount',
      'Collapsible animation works smoothly',
    ],
    relatedTestCases: [],
  },
  {
    id: 'UC-WALLET-002',
    title: 'Pay Invoice with PIN',
    description: 'User wants to pay an invoice using wallet balance by entering 4-digit PIN',
    priority: 'High',
    userType: 'End User',
    preconditions: [
      'User is logged in',
      'User has wallet with sufficient balance',
      'User knows the invoice PIN/OTP',
      'Network connection is available',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps floating "Pay" button',
        expectedResult: 'Payment section slides up from bottom with PIN input field',
        uiState: 'Payment section overlay appears at bottom of screen',
      },
      {
        step: 2,
        action: 'User enters 4-digit PIN in the input field',
        expectedResult: 'PIN digits appear as user types',
        uiState: 'PIN input shows entered digits',
      },
      {
        step: 3,
        action: 'User taps check button after entering PIN',
        expectedResult: 'Check button slides to the right, PIN input slides in from opposite side',
        uiState: 'Animation plays, PIN input becomes visible',
      },
      {
        step: 4,
        action: 'App validates PIN and fetches invoice details',
        expectedResult: 'Loading indicator appears while validating',
        uiState: 'Loading spinner is visible',
      },
      {
        step: 5,
        action: 'Invoice is found and validated',
        expectedResult: 'User is navigated to invoice details page',
        uiState: 'Invoice details screen is displayed',
      },
    ],
    postconditions: [
      'Invoice details are displayed',
      'User can proceed with payment',
      'Payment section closes',
    ],
    successCriteria: [
      'PIN validation works correctly',
      'Invoice is fetched successfully',
      'Navigation to invoice details works',
    ],
    relatedTestCases: [],
  },
  {
    id: 'UC-WALLET-003',
    title: 'Top Up Wallet',
    description: 'User wants to add funds to their wallet using a top-up key',
    priority: 'High',
    userType: 'End User',
    preconditions: [
      'User is logged in',
      'User has a valid top-up key',
      'Network connection is available',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps "Top Up Wallet" button in balance section',
        expectedResult: 'User is navigated to wallet store page',
        uiState: 'Wallet store screen is displayed',
      },
      {
        step: 2,
        action: 'User receives top-up key (from QR scan or manual entry)',
        expectedResult: 'Top-up key is available',
        uiState: 'Top-up key is ready to use',
      },
      {
        step: 3,
        action: 'App processes top-up request with top-up key',
        expectedResult: 'Loading bottom sheet appears with "Processing topup" message',
        uiState: 'Loading bottom sheet is visible',
      },
      {
        step: 4,
        action: 'Server processes top-up and adds funds',
        expectedResult: 'Success message is displayed and wallet balance is updated',
        uiState: 'Success message appears, balance refreshes',
      },
    ],
    postconditions: [
      'Wallet balance is increased',
      'Top-up transaction is recorded',
      'User can see updated balance',
    ],
    successCriteria: [
      'Top-up processes successfully',
      'Balance updates correctly',
      'Success message is displayed',
    ],
    relatedTestCases: [],
  },
  {
    id: 'UC-WALLET-004',
    title: 'View Transaction History',
    description: 'User wants to view their wallet transaction history with date filtering',
    priority: 'Medium',
    userType: 'End User',
    preconditions: [
      'User is logged in',
      'User has wallet with transactions',
      'Network connection is available',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps on balance card in wallet screen',
        expectedResult: 'User is navigated to wallet info/transaction screen',
        uiState: 'Transaction screen opens showing wallet card background and transaction list',
      },
      {
        step: 2,
        action: 'App loads transactions for default date range (today)',
        expectedResult: 'Loading indicator appears while fetching transactions',
        uiState: 'Loading spinner is visible',
      },
      {
        step: 3,
        action: 'Server returns transaction list',
        expectedResult: 'Transactions are displayed in a scrollable list with date, amount, and description',
        uiState: 'Transaction list is displayed with transaction cards',
      },
      {
        step: 4,
        action: 'User selects different date range using date picker',
        expectedResult: 'Transactions are filtered and refreshed for selected date range',
        uiState: 'Transaction list updates with filtered results',
      },
      {
        step: 5,
        action: 'User scrolls down to load more transactions',
        expectedResult: 'Next page of transactions loads automatically',
        uiState: 'More transactions appear at bottom of list',
      },
    ],
    postconditions: [
      'User can see transaction history',
      'User can filter by date range',
      'User can scroll through paginated results',
    ],
    successCriteria: [
      'Transactions load successfully',
      'Date filtering works correctly',
      'Pagination works smoothly',
    ],
    relatedTestCases: [],
  },
  {
    id: 'UC-WALLET-005',
    title: 'Pay Invoice from Transaction Screen',
    description: 'User wants to pay an invoice from the wallet transaction screen',
    priority: 'High',
    userType: 'End User',
    preconditions: [
      'User is logged in',
      'User has wallet with sufficient balance',
      'User is viewing transaction screen',
      'Invoice is available',
      'Network connection is available',
    ],
    steps: [
      {
        step: 1,
        action: 'User enters invoice PIN/OTP in the input field',
        expectedResult: 'PIN is entered in the input field',
        uiState: 'PIN input shows entered digits',
      },
      {
        step: 2,
        action: 'User taps validate button',
        expectedResult: 'App validates PIN and fetches invoice details',
        uiState: 'Loading indicator appears',
      },
      {
        step: 3,
        action: 'Invoice is found and displayed',
        expectedResult: 'User is navigated to invoice details page',
        uiState: 'Invoice details screen shows invoice information',
      },
      {
        step: 4,
        action: 'User selects tip amount (if applicable)',
        expectedResult: 'Tip amount is selected',
        uiState: 'Selected tip is highlighted',
      },
      {
        step: 5,
        action: 'User confirms payment',
        expectedResult: 'Payment is processed and success screen is displayed',
        uiState: 'Success dialog shows with mascot icon and "Invoice paid" message',
      },
    ],
    postconditions: [
      'Invoice is paid successfully',
      'Wallet balance is deducted',
      'Transaction is recorded',
      'User is redirected to home screen',
    ],
    successCriteria: [
      'Payment processes successfully',
      'Balance updates correctly',
      'Success message is displayed',
      'Navigation works correctly',
    ],
    relatedTestCases: [],
  },
  {
    id: 'UC-WALLET-006',
    title: 'Browse Restaurants for Dine-In Payment',
    description: 'User wants to browse restaurants that accept wallet payment for dine-in orders',
    priority: 'Medium',
    userType: 'End User',
    preconditions: [
      'User is logged in',
      'User has wallet',
      'Network connection is available',
    ],
    steps: [
      {
        step: 1,
        action: 'User scrolls down on wallet screen past balance section',
        expectedResult: 'Restaurant list/map view appears below balance section',
        uiState: 'Restaurant tabs and list view are displayed',
      },
      {
        step: 2,
        action: 'App loads dine-in restaurant tabs',
        expectedResult: 'Restaurant category tabs are displayed horizontally',
        uiState: 'Tabs show restaurant categories (e.g., "All", "Fast Food", "Fine Dining")',
      },
      {
        step: 3,
        action: 'User selects a restaurant category tab',
        expectedResult: 'Restaurant list filters to show restaurants in selected category',
        uiState: 'Restaurant list updates with filtered restaurants',
      },
      {
        step: 4,
        action: 'User toggles between list and map view',
        expectedResult: 'View switches between list of restaurant cards and map with markers',
        uiState: 'List view shows restaurant cards, map view shows map with restaurant markers',
      },
      {
        step: 5,
        action: 'User taps on a restaurant card',
        expectedResult: 'User is navigated to restaurant menu page',
        uiState: 'Restaurant menu screen is displayed',
      },
    ],
    postconditions: [
      'User can browse restaurants',
      'User can filter by category',
      'User can switch between list and map views',
      'User can navigate to restaurant menu',
    ],
    successCriteria: [
      'Restaurant list loads successfully',
      'Category filtering works',
      'View toggle works correctly',
      'Navigation to menu works',
    ],
    relatedTestCases: [],
  },
  {
    id: 'UC-WALLET-007',
    title: 'Open Wallet from QR Code',
    description: 'User scans QR code to open wallet or perform wallet operation',
    priority: 'Medium',
    userType: 'End User',
    preconditions: [
      'User is logged in',
      'User has QR code with wallet operation data',
      'Network connection is available',
      'Camera permission is granted',
    ],
    steps: [
      {
        step: 1,
        action: 'User scans QR code containing wallet operation (e.g., "open-ya-semsem" or topup key)',
        expectedResult: 'QR code is scanned and data is extracted',
        uiState: 'QR scanner processes the code',
      },
      {
        step: 2,
        action: 'App detects wallet operation type from QR data',
        expectedResult: 'App determines if it is openFromQr or topup operation',
        uiState: 'App processes QR data',
      },
      {
        step: 3,
        action: 'For openFromQr operation, app calls openFromQr API',
        expectedResult: 'Loading bottom sheet appears with "Opening wallet" message',
        uiState: 'Loading bottom sheet is visible',
      },
      {
        step: 4,
        action: 'Server processes request and returns result',
        expectedResult: 'Success or error message is displayed',
        uiState: 'Message dialog shows result',
      },
      {
        step: 5,
        action: 'For topup operation, app calls topup API with topup key',
        expectedResult: 'Loading bottom sheet appears with "Processing topup" message',
        uiState: 'Loading bottom sheet is visible',
      },
      {
        step: 6,
        action: 'Top-up is processed and balance is updated',
        expectedResult: 'Success message is displayed and wallet list refreshes',
        uiState: 'Success message appears, balance updates',
      },
    ],
    postconditions: [
      'Wallet operation is completed',
      'Balance is updated (for topup)',
      'User sees operation result',
    ],
    successCriteria: [
      'QR scanning works correctly',
      'Operation type is detected correctly',
      'API calls succeed',
      'Balance updates correctly',
    ],
    relatedTestCases: [],
  },
  {
    id: 'UC-WALLET-008',
    title: 'View First Visit Explanation',
    description: 'New user sees explanation about wallet feature on first visit',
    priority: 'Low',
    userType: 'End User',
    preconditions: [
      'User is logged in',
      'User is visiting wallet screen for the first time',
      'Explanation HTML content is available',
    ],
    steps: [
      {
        step: 1,
        action: 'User navigates to wallet screen for the first time',
        expectedResult: 'Wallet screen loads normally',
        uiState: 'Balance section and restaurant list are displayed',
      },
      {
        step: 2,
        action: 'App checks if this is first visit (checks local storage flag)',
        expectedResult: 'First visit flag is not set',
        uiState: 'App detects first visit',
      },
      {
        step: 3,
        action: 'After short delay, explanation bottom sheet appears',
        expectedResult: 'HTML explanation bottom sheet slides up showing wallet information',
        uiState: 'Bottom sheet displays HTML content with "Welcome to beepay" title',
      },
      {
        step: 4,
        action: 'User reads explanation and closes bottom sheet',
        expectedResult: 'Bottom sheet closes and first visit flag is saved',
        uiState: 'Bottom sheet slides down, wallet screen remains visible',
      },
    ],
    postconditions: [
      'User understands wallet feature',
      'First visit flag is saved',
      'Explanation does not show again on subsequent visits',
    ],
    successCriteria: [
      'Explanation appears on first visit only',
      'HTML content displays correctly',
      'Flag is saved correctly',
    ],
    relatedTestCases: [],
  },
];

