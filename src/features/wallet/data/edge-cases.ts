import { EdgeCase } from '@/lib/types';

export const walletEdgeCases: EdgeCase[] = [
  {
    id: 'EC-WALLET-001',
    title: 'Network Error While Loading Wallet',
    category: 'Network',
    likelihood: 'Medium',
    impact: 'High',
    triggerCondition: 'Network connection is lost or server is unavailable while fetching wallet list',
    expectedBehavior: 'App should display error message and allow retry',
    uiHandling: {
      errorMessage: 'Network error. Please check your connection and try again.',
      recoveryOptions: ['Retry loading wallet', 'Check network connection'],
    },
    implementationNotes: {
      flutterFiles: ['wallet_viewmodel.dart', 'wallet_service.dart'],
      validationRules: ['Handle network exceptions', 'Show user-friendly error messages'],
    },
    relatedTestCases: ['TC-WALLET-001'],
  },
  {
    id: 'EC-WALLET-002',
    title: 'Empty Wallet List',
    category: 'Data',
    likelihood: 'Low',
    impact: 'Medium',
    triggerCondition: 'User has no wallet cards yet',
    expectedBehavior: 'App should display empty state message or prompt to create wallet',
    uiHandling: {
      errorMessage: 'No wallets found. Please create a wallet.',
      recoveryOptions: ['Create wallet', 'Contact support'],
    },
    implementationNotes: {
      flutterFiles: ['new_wallet_view.dart', 'new_wallet_body.dart'],
    },
    relatedTestCases: ['TC-WALLET-001'],
  },
  {
    id: 'EC-WALLET-003',
    title: 'Payment Section Fails to Open',
    category: 'UI',
    likelihood: 'Low',
    impact: 'Medium',
    triggerCondition: 'Animation or state issue prevents payment section from opening',
    expectedBehavior: 'Payment section should open smoothly, or error should be handled gracefully',
    uiHandling: {
      errorMessage: 'Unable to open payment section. Please try again.',
      recoveryOptions: ['Try again', 'Restart app'],
    },
    implementationNotes: {
      flutterFiles: ['new_wallet_body.dart', 'payment_section.dart'],
    },
    relatedTestCases: ['TC-WALLET-003'],
  },
  {
    id: 'EC-WALLET-004',
    title: 'Invalid PIN Format',
    category: 'Validation',
    likelihood: 'Medium',
    impact: 'Low',
    triggerCondition: 'User enters PIN with wrong format (non-numeric, wrong length)',
    expectedBehavior: 'App should validate PIN format and show error message',
    uiHandling: {
      errorMessage: 'Please enter 4 digits',
      recoveryOptions: ['Enter valid PIN', 'Check PIN format'],
    },
    implementationNotes: {
      flutterFiles: ['new_wallet_body.dart', 'payment_section.dart'],
      validationRules: ['PIN must be exactly 4 digits', 'PIN must be numeric'],
    },
    relatedTestCases: ['TC-WALLET-005'],
  },
  {
    id: 'EC-WALLET-005',
    title: 'Invoice Not Found',
    category: 'Validation',
    likelihood: 'Medium',
    impact: 'Medium',
    triggerCondition: 'User enters PIN that does not match any invoice',
    expectedBehavior: 'App should display clear error message that invoice was not found',
    uiHandling: {
      errorMessage: 'Invoice not found',
      recoveryOptions: ['Check PIN', 'Try again'],
    },
    implementationNotes: {
      flutterFiles: ['new_wallet_body.dart', 'walet_info_viewmodel.dart'],
    },
    relatedTestCases: ['TC-WALLET-005'],
  },
  {
    id: 'EC-WALLET-006',
    title: 'Top-Up Key Invalid or Expired',
    category: 'Validation',
    likelihood: 'Low',
    impact: 'High',
    triggerCondition: 'User tries to top up with invalid or expired top-up key',
    expectedBehavior: 'App should display error message and prevent top-up',
    uiHandling: {
      errorMessage: 'Invalid or expired top-up key',
      recoveryOptions: ['Check top-up key', 'Contact support'],
    },
    implementationNotes: {
      flutterFiles: ['wallet_service.dart', 'walet_info_viewmodel.dart'],
    },
    relatedTestCases: ['TC-WALLET-006'],
  },
  {
    id: 'EC-WALLET-007',
    title: 'Transaction History Fails to Load',
    category: 'Network',
    likelihood: 'Medium',
    impact: 'Medium',
    triggerCondition: 'Network error or server issue while loading transactions',
    expectedBehavior: 'App should display error message with retry option',
    uiHandling: {
      errorMessage: 'Unable to load transactions. Please try again.',
      recoveryOptions: ['Retry', 'Check network connection'],
    },
    implementationNotes: {
      flutterFiles: ['walet_info_viewmodel.dart', 'transaction_list_widget.dart'],
    },
    relatedTestCases: ['TC-WALLET-007'],
  },
  {
    id: 'EC-WALLET-008',
    title: 'Invalid Date Range Selected',
    category: 'Validation',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'User selects invalid date range (end date before start date)',
    expectedBehavior: 'App should prevent invalid date selection or auto-correct',
    uiHandling: {
      errorMessage: 'End date must be after start date',
      recoveryOptions: ['Select valid date range'],
    },
    implementationNotes: {
      flutterFiles: ['transaction_date_picker_widget.dart'],
    },
    relatedTestCases: ['TC-WALLET-008'],
  },
  {
    id: 'EC-WALLET-009',
    title: 'Pagination Fails While Loading More Transactions',
    category: 'Network',
    likelihood: 'Medium',
    impact: 'Low',
    triggerCondition: 'Network error occurs while loading next page of transactions',
    expectedBehavior: 'App should show error indicator and allow retry for that page',
    uiHandling: {
      errorMessage: 'Error loading more transactions',
      recoveryOptions: ['Retry', 'Check network'],
    },
    implementationNotes: {
      flutterFiles: ['transaction_list_widget.dart', 'walet_info_viewmodel.dart'],
    },
    relatedTestCases: ['TC-WALLET-009'],
  },
  {
    id: 'EC-WALLET-010',
    title: 'Insufficient Balance for Payment',
    category: 'Validation',
    likelihood: 'Medium',
    impact: 'High',
    triggerCondition: 'User tries to pay invoice but wallet balance is insufficient',
    expectedBehavior: 'App should prevent payment and show clear error message',
    uiHandling: {
      errorMessage: 'Insufficient balance. Please top up your wallet.',
      recoveryOptions: ['Top up wallet', 'Check balance'],
    },
    implementationNotes: {
      flutterFiles: ['walet_info_viewmodel.dart', 'invoice_details_page_widget.dart'],
    },
    relatedTestCases: ['TC-WALLET-010'],
  },
  {
    id: 'EC-WALLET-011',
    title: 'Restaurant List Fails to Load',
    category: 'Network',
    likelihood: 'Medium',
    impact: 'Low',
    triggerCondition: 'Network error while loading restaurant list for dine-in',
    expectedBehavior: 'App should display error message or empty state',
    uiHandling: {
      errorMessage: 'Unable to load restaurants',
      recoveryOptions: ['Retry', 'Check network'],
    },
    implementationNotes: {
      flutterFiles: ['new_wallet_body.dart'],
    },
    relatedTestCases: ['TC-WALLET-011'],
  },
  {
    id: 'EC-WALLET-012',
    title: 'Guest User Tries to Access Wallet',
    category: 'State',
    likelihood: 'High',
    impact: 'Medium',
    triggerCondition: 'Guest user navigates to wallet screen',
    expectedBehavior: 'App should show login prompt instead of wallet screen',
    uiHandling: {
      errorMessage: 'Please log in to access your wallet',
      recoveryOptions: ['Log in', 'Create account'],
    },
    implementationNotes: {
      flutterFiles: ['new_wallet_view.dart', 'wallet_guest_login_prompt.dart'],
    },
    relatedTestCases: ['TC-WALLET-012'],
  },
  {
    id: 'EC-WALLET-013',
    title: 'QR Code Scan Fails',
    category: 'Validation',
    likelihood: 'Low',
    impact: 'Medium',
    triggerCondition: 'QR code scan fails or returns invalid data',
    expectedBehavior: 'App should handle scan failure gracefully',
    uiHandling: {
      errorMessage: 'Invalid QR code. Please try again.',
      recoveryOptions: ['Retry scan', 'Enter manually'],
    },
    implementationNotes: {
      flutterFiles: ['wallet_operation_handler.dart'],
    },
    relatedTestCases: [],
  },
  {
    id: 'EC-WALLET-014',
    title: 'Balance Update Fails After Payment',
    category: 'Network',
    likelihood: 'Low',
    impact: 'High',
    triggerCondition: 'Payment succeeds but balance update fails',
    expectedBehavior: 'App should handle this edge case and sync balance',
    uiHandling: {
      errorMessage: 'Payment successful. Balance will update shortly.',
      recoveryOptions: ['Refresh screen', 'Check balance'],
    },
    implementationNotes: {
      flutterFiles: ['wallet_viewmodel.dart', 'walet_info_viewmodel.dart'],
    },
    relatedTestCases: ['TC-WALLET-010'],
  },
  {
    id: 'EC-WALLET-015',
    title: 'Multiple Rapid Payment Attempts',
    category: 'Concurrency',
    likelihood: 'Low',
    impact: 'Medium',
    triggerCondition: 'User taps payment button multiple times rapidly',
    expectedBehavior: 'App should prevent duplicate payments',
    uiHandling: {
      errorMessage: 'Payment is already processing',
      recoveryOptions: ['Wait for payment to complete'],
    },
    implementationNotes: {
      flutterFiles: ['walet_info_viewmodel.dart'],
      validationRules: ['Prevent concurrent payment requests'],
    },
    relatedTestCases: ['TC-WALLET-010'],
  },
  {
    id: 'EC-WALLET-016',
    title: 'Date Picker Crashes or Freezes',
    category: 'Performance',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'Date picker widget encounters error or performance issue',
    expectedBehavior: 'App should handle date picker errors gracefully',
    uiHandling: {
      errorMessage: 'Date picker error. Please try again.',
      recoveryOptions: ['Try again', 'Restart app'],
    },
    implementationNotes: {
      flutterFiles: ['transaction_date_picker_widget.dart'],
    },
    relatedTestCases: ['TC-WALLET-008'],
  },
  {
    id: 'EC-WALLET-017',
    title: 'Explanation Bottom Sheet Fails to Load',
    category: 'Data',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'HTML content for explanation is missing or invalid',
    expectedBehavior: 'App should handle missing content gracefully and continue',
    uiHandling: {
      errorMessage: 'N/A',
      recoveryOptions: [],
    },
    implementationNotes: {
      flutterFiles: ['new_wallet_view.dart'],
    },
    relatedTestCases: ['TC-WALLET-013'],
  },
  {
    id: 'EC-WALLET-018',
    title: 'Deep Link Parameters Invalid',
    category: 'Validation',
    likelihood: 'Low',
    impact: 'Medium',
    triggerCondition: 'Wallet screen opened via deep link with invalid parameters',
    expectedBehavior: 'App should handle invalid parameters and continue normally',
    uiHandling: {
      errorMessage: 'N/A',
      recoveryOptions: [],
    },
    implementationNotes: {
      flutterFiles: ['new_wallet_view.dart'],
    },
    relatedTestCases: [],
  },
];

