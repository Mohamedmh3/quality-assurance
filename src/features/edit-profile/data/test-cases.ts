import { TestCase } from '@/lib/types';

export const editProfileTestCases: TestCase[] = [
  {
    id: 'TC-EDIT-PROFILE-001',
    title: 'Display Edit Profile Screen',
    whatYoureTesting: 'Verify that edit profile screen appears and displays current profile information',
    whyItMatters: 'Users need to see their profile information to edit it. If screen doesn\'t load, editing cannot proceed.',
    estimatedTime: '2-3 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-001', 'UC-EDIT-PROFILE-011'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-001', 'EC-EDIT-PROFILE-002'],
    testSteps: [
      {
        step: 1,
        instruction: 'Navigate to edit profile screen',
        detailedSteps: [
          '1. Open app',
          '2. Navigate to profile section',
          '3. Tap on edit profile option',
          '4. Wait for screen to load',
        ],
        whatYouShouldSee: 'Edit profile screen appears. Loading indicator may appear briefly while fetching initial data (cities, genders, user info, loyalty info)',
        expectedResult: 'Screen loads successfully',
      },
      {
        step: 2,
        instruction: 'Verify loyalty widget is displayed',
        detailedSteps: [
          '1. Check if loyalty widget appears',
          '2. Check welcome message',
          '3. Check points display',
        ],
        whatYouShouldSee: 'Loyalty widget appears at top showing "Welcome [User Name]", circular progress indicator with mascot image in center, current points (e.g., "100 pt"), and points remaining to next tier if applicable',
        expectedResult: 'Loyalty widget is displayed correctly',
      },
      {
        step: 3,
        instruction: 'Verify form fields are pre-filled',
        detailedSteps: [
          '1. Check name field',
          '2. Check email field',
          '3. Check date of birth field',
          '4. Check mobile field',
          '5. Check gender dropdown',
          '6. Check city dropdown',
        ],
        whatYouShouldSee: 'Form fields show current values: name field shows current name, email field shows current email, date of birth shows current date (if set), mobile shows current mobile number, gender dropdown shows current gender, city dropdown shows current city',
        expectedResult: 'Form fields are pre-filled correctly',
      },
    ],
    preconditions: [
      'User is logged in',
      'User navigates to edit profile screen',
      'Network connection available',
    ],
    testData: 'Logged-in user with profile data',
    automatable: true,
    status: 'Not Started',
    notes: 'Initial data is fetched in parallel (cities, genders, user info, loyalty info)',
    successChecklist: [
      '✓ Screen loads',
      '✓ Loyalty widget appears',
      '✓ Form fields are pre-filled',
      '✓ All data is displayed',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-002',
    title: 'Edit Full Name',
    whatYoureTesting: 'Verify that users can edit their full name and save changes',
    whyItMatters: 'Users need to update their name. Name editing must work correctly with validation.',
    estimatedTime: '1-2 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-002'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-003'],
    testSteps: [
      {
        step: 1,
        instruction: 'View name field',
        detailedSteps: [
          '1. Navigate to edit profile screen',
          '2. Find name field',
        ],
        whatYouShouldSee: 'Name input field appears showing current name value',
        expectedResult: 'Name field is displayed',
      },
      {
        step: 2,
        instruction: 'Edit name',
        detailedSteps: [
          '1. Tap on name field',
          '2. Clear existing name',
          '3. Type new name',
        ],
        whatYouShouldSee: 'Name field becomes editable, existing name can be cleared, new name can be typed',
        expectedResult: 'Name can be edited',
      },
      {
        step: 3,
        instruction: 'Verify validation',
        detailedSteps: [
          '1. Enter invalid name (e.g., empty or too short)',
          '2. Try to save',
        ],
        whatYouShouldSee: 'Validation error appears: "invalid_name" message. Save button may be disabled or form shows error',
        expectedResult: 'Validation works correctly',
      },
      {
        step: 4,
        instruction: 'Save valid name',
        detailedSteps: [
          '1. Enter valid name',
          '2. Tap Save button',
        ],
        whatYouShouldSee: 'Loading state appears, name is saved to server, screen closes or navigates back',
        expectedResult: 'Name is saved successfully',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'Name field is visible',
    ],
    testData: 'Valid and invalid name values',
    automatable: true,
    status: 'Not Started',
    notes: 'Name validation uses Validators.isValidName',
    successChecklist: [
      '✓ Name can be edited',
      '✓ Validation works',
      '✓ Name is saved',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-003',
    title: 'Edit Email Address',
    whatYoureTesting: 'Verify that users can edit their email address and save changes',
    whyItMatters: 'Users need to update their email. Email editing must work correctly with validation.',
    estimatedTime: '1-2 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-003'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-004'],
    testSteps: [
      {
        step: 1,
        instruction: 'View email field',
        detailedSteps: [
          '1. Navigate to edit profile screen',
          '2. Find email field',
        ],
        whatYouShouldSee: 'Email input field appears showing current email value',
        expectedResult: 'Email field is displayed',
      },
      {
        step: 2,
        instruction: 'Edit email',
        detailedSteps: [
          '1. Tap on email field',
          '2. Clear existing email',
          '3. Type new email',
        ],
        whatYouShouldSee: 'Email field becomes editable, existing email can be cleared, new email can be typed',
        expectedResult: 'Email can be edited',
      },
      {
        step: 3,
        instruction: 'Verify validation',
        detailedSteps: [
          '1. Enter invalid email (e.g., "invalid" or "test@")',
          '2. Try to save',
        ],
        whatYouShouldSee: 'Validation error appears: "invalid_email" message. Save button may be disabled or form shows error',
        expectedResult: 'Validation works correctly',
      },
      {
        step: 4,
        instruction: 'Save valid email',
        detailedSteps: [
          '1. Enter valid email',
          '2. Tap Save button',
        ],
        whatYouShouldSee: 'Loading state appears, email is saved to server, screen closes or navigates back',
        expectedResult: 'Email is saved successfully',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'Email field is visible',
    ],
    testData: 'Valid and invalid email values',
    automatable: true,
    status: 'Not Started',
    notes: 'Email validation uses Validators.isValidEmail',
    successChecklist: [
      '✓ Email can be edited',
      '✓ Validation works',
      '✓ Email is saved',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-004',
    title: 'Edit Date of Birth',
    whatYoureTesting: 'Verify that users can edit date of birth if it was not previously set',
    whyItMatters: 'Users need to set or update their date of birth. Date editing must work correctly with restrictions.',
    estimatedTime: '1-2 minutes',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: ['UC-EDIT-PROFILE-004'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-005'],
    testSteps: [
      {
        step: 1,
        instruction: 'View date of birth field',
        detailedSteps: [
          '1. Navigate to edit profile screen',
          '2. Find date of birth field',
        ],
        whatYouShouldSee: 'Date input field appears showing current date (if set) or empty',
        expectedResult: 'Date field is displayed',
      },
      {
        step: 2,
        instruction: 'Tap date field when date is not set',
        detailedSteps: [
          '1. Ensure date of birth was not previously set',
          '2. Tap on date field',
        ],
        whatYouShouldSee: 'Date picker opens allowing selection of date',
        expectedResult: 'Date picker opens',
      },
      {
        step: 3,
        instruction: 'Select date',
        detailedSteps: [
          '1. Select a date from date picker',
        ],
        whatYouShouldSee: 'Selected date appears in field in yyyy-MM-dd format',
        expectedResult: 'Date is selected',
      },
      {
        step: 4,
        instruction: 'Tap date field when date is already set',
        detailedSteps: [
          '1. Ensure date of birth was previously set',
          '2. Tap on date field',
        ],
        whatYouShouldSee: 'Message dialog appears: "date_of_birth_snack_bar" saying date cannot be changed. Date picker does not open',
        expectedResult: 'Date cannot be changed',
      },
      {
        step: 5,
        instruction: 'Save date',
        detailedSteps: [
          '1. Select date (if not set)',
          '2. Tap Save button',
        ],
        whatYouShouldSee: 'Loading state appears, date is saved to server, screen closes or navigates back',
        expectedResult: 'Date is saved successfully',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'Date of birth field is visible',
    ],
    testData: 'User with and without date of birth set',
    automatable: false,
    status: 'Not Started',
    notes: 'Date can only be set if it was not previously set. Date is stored in yyyy-MM-dd format',
    successChecklist: [
      '✓ Date field appears',
      '✓ Date picker opens when date not set',
      '✓ Date cannot be changed if already set',
      '✓ Date is saved',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-005',
    title: 'Edit Gender',
    whatYoureTesting: 'Verify that users can select gender from dropdown and save changes',
    whyItMatters: 'Users need to update their gender. Gender selection must work correctly.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-005'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-006'],
    testSteps: [
      {
        step: 1,
        instruction: 'View gender dropdown',
        detailedSteps: [
          '1. Navigate to edit profile screen',
          '2. Find gender dropdown',
        ],
        whatYouShouldSee: 'Gender dropdown appears showing current gender (if selected) or placeholder',
        expectedResult: 'Gender dropdown is displayed',
      },
      {
        step: 2,
        instruction: 'Select gender',
        detailedSteps: [
          '1. Tap on gender dropdown',
          '2. Select a gender from list',
        ],
        whatYouShouldSee: 'Dropdown opens showing available genders (Male, Female, Other). Selected gender is highlighted and appears in dropdown',
        expectedResult: 'Gender is selected',
      },
      {
        step: 3,
        instruction: 'Save changes',
        detailedSteps: [
          '1. Tap Save button',
        ],
        whatYouShouldSee: 'Loading state appears, gender is saved to server, screen closes or navigates back',
        expectedResult: 'Gender is saved successfully',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'Gender dropdown is visible',
    ],
    testData: 'Available genders list',
    automatable: true,
    status: 'Not Started',
    notes: 'Gender is fetched from API',
    successChecklist: [
      '✓ Gender dropdown appears',
      '✓ Gender can be selected',
      '✓ Gender is saved',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-006',
    title: 'Edit City',
    whatYoureTesting: 'Verify that users can select city from dropdown and save changes',
    whyItMatters: 'Users need to update their city. City selection must work correctly.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-006'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-007'],
    testSteps: [
      {
        step: 1,
        instruction: 'View city dropdown',
        detailedSteps: [
          '1. Navigate to edit profile screen',
          '2. Find city dropdown',
        ],
        whatYouShouldSee: 'City dropdown appears showing current city (if selected) or placeholder',
        expectedResult: 'City dropdown is displayed',
      },
      {
        step: 2,
        instruction: 'Select city',
        detailedSteps: [
          '1. Tap on city dropdown',
          '2. Select a city from list',
        ],
        whatYouShouldSee: 'Dropdown opens showing available cities. Selected city is highlighted and appears in dropdown',
        expectedResult: 'City is selected',
      },
      {
        step: 3,
        instruction: 'Save changes',
        detailedSteps: [
          '1. Tap Save button',
        ],
        whatYouShouldSee: 'Loading state appears, city is saved to server, screen closes or navigates back',
        expectedResult: 'City is saved successfully',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'City dropdown is visible',
    ],
    testData: 'Available cities list',
    automatable: true,
    status: 'Not Started',
    notes: 'Cities are fetched from API',
    successChecklist: [
      '✓ City dropdown appears',
      '✓ City can be selected',
      '✓ City is saved',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-007',
    title: 'View Loyalty Points',
    whatYoureTesting: 'Verify that loyalty points and tier information are displayed correctly',
    whyItMatters: 'Users need to see their loyalty points and progress. This information must be displayed correctly.',
    estimatedTime: '1 minute',
    type: 'Functional',
    priority: 'P1',
    relatedUseCases: ['UC-EDIT-PROFILE-007'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-008'],
    testSteps: [
      {
        step: 1,
        instruction: 'View loyalty widget',
        detailedSteps: [
          '1. Navigate to edit profile screen',
          '2. Observe loyalty widget at top',
        ],
        whatYouShouldSee: 'Loyalty widget appears showing "Welcome [User Name]" text, circular progress indicator with mascot image in center, current points (e.g., "100 pt"), and points remaining to next tier if applicable',
        expectedResult: 'Loyalty widget is displayed',
      },
      {
        step: 2,
        instruction: 'Verify progress indicator',
        detailedSteps: [
          '1. Check circular progress indicator',
          '2. Check progress calculation',
        ],
        whatYouShouldSee: 'Circular progress indicator shows progress as userPoint / endPoint. If endPoint is null, progress shows 100%. Mascot image appears in center',
        expectedResult: 'Progress indicator is correct',
      },
      {
        step: 3,
        instruction: 'Verify points display',
        detailedSteps: [
          '1. Check current points',
          '2. Check remaining points',
        ],
        whatYouShouldSee: 'Current points are displayed (e.g., "100 pt"). If remaining points > 0, text shows "X points_left_to_reach [next tier name]"',
        expectedResult: 'Points are displayed correctly',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'User has loyalty account',
    ],
    testData: 'User with loyalty points',
    automatable: true,
    status: 'Not Started',
    notes: 'Loyalty info is fetched from API',
    successChecklist: [
      '✓ Loyalty widget appears',
      '✓ Points are displayed',
      '✓ Progress indicator is correct',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-008',
    title: 'Save Profile Changes',
    whatYoureTesting: 'Verify that users can save all profile changes successfully',
    whyItMatters: 'Profile updates must be saved. Save functionality is critical.',
    estimatedTime: '2-3 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-008'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-009', 'EC-EDIT-PROFILE-010'],
    testSteps: [
      {
        step: 1,
        instruction: 'Make changes to profile',
        detailedSteps: [
          '1. Edit name',
          '2. Edit email',
          '3. Select gender',
          '4. Select city',
        ],
        whatYouShouldSee: 'Form fields are updated with new values',
        expectedResult: 'Changes are made',
      },
      {
        step: 2,
        instruction: 'Tap Save button',
        detailedSteps: [
          '1. Scroll to Save button',
          '2. Tap Save button',
        ],
        whatYouShouldSee: 'Loading state appears, form validation occurs, API request is made to update user info',
        expectedResult: 'Save is initiated',
      },
      {
        step: 3,
        instruction: 'Wait for save to complete',
        detailedSteps: [
          '1. Wait for API response',
        ],
        whatYouShouldSee: 'Loading state disappears, screen closes or navigates back. If from deep link launch, navigates to splash. Otherwise, pops navigation',
        expectedResult: 'Save completes successfully',
      },
      {
        step: 4,
        instruction: 'Verify changes are saved',
        detailedSteps: [
          '1. Navigate back to edit profile screen',
          '2. Check if changes are reflected',
        ],
        whatYouShouldSee: 'Changes are reflected in form fields. Updated values appear',
        expectedResult: 'Changes are persisted',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'User has made changes',
      'Form is valid',
      'Network connection available',
    ],
    testData: 'Valid profile changes',
    automatable: true,
    status: 'Not Started',
    notes: 'Navigation depends on whether user came from deep link',
    successChecklist: [
      '✓ Save button works',
      '✓ Loading state appears',
      '✓ Changes are saved',
      '✓ Navigation occurs',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-009',
    title: 'Logout from Account',
    whatYoureTesting: 'Verify that users can logout from their account',
    whyItMatters: 'Users need to logout. Logout functionality must work correctly.',
    estimatedTime: '1-2 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-009'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-011'],
    testSteps: [
      {
        step: 1,
        instruction: 'View logout button',
        detailedSteps: [
          '1. Navigate to edit profile screen',
          '2. Scroll to logout button',
        ],
        whatYouShouldSee: 'Logout button appears below form with refresh icon and "logout" text',
        expectedResult: 'Logout button is displayed',
      },
      {
        step: 2,
        instruction: 'Tap logout button',
        detailedSteps: [
          '1. Tap on logout button',
        ],
        whatYouShouldSee: 'Loading state appears, logout API request is made',
        expectedResult: 'Logout is initiated',
      },
      {
        step: 3,
        instruction: 'Wait for logout',
        detailedSteps: [
          '1. Wait for API response',
        ],
        whatYouShouldSee: 'Loading state disappears, user is navigated to splash screen. Viewmodels (SpinnerViewModel, HomeViewModel) are reset',
        expectedResult: 'Logout completes successfully',
      },
      {
        step: 4,
        instruction: 'Verify logout',
        detailedSteps: [
          '1. Check if user is logged out',
          '2. Try to access protected screens',
        ],
        whatYouShouldSee: 'User is logged out, protected screens require login',
        expectedResult: 'Logout is successful',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'User is logged in',
      'Network connection available',
    ],
    testData: 'N/A',
    automatable: true,
    status: 'Not Started',
    notes: 'Viewmodels are reset after logout',
    successChecklist: [
      '✓ Logout button appears',
      '✓ Logout works',
      '✓ Navigation occurs',
      '✓ Viewmodels are reset',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-010',
    title: 'Delete Account',
    whatYoureTesting: 'Verify that users can delete their account (iOS only)',
    whyItMatters: 'Users need to delete their account. Account deletion must work correctly.',
    estimatedTime: '2-3 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-010'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-012'],
    testSteps: [
      {
        step: 1,
        instruction: 'View delete account button',
        detailedSteps: [
          '1. Navigate to edit profile screen on iOS',
          '2. Scroll to delete account button',
        ],
        whatYouShouldSee: 'Delete account button appears below logout button with trash icon and red "delete_account" text. Button only appears on iOS',
        expectedResult: 'Delete account button is displayed',
      },
      {
        step: 2,
        instruction: 'Tap delete account button',
        detailedSteps: [
          '1. Tap on delete account button',
        ],
        whatYouShouldSee: 'Bottom sheet slides up showing delete confirmation dialog with title "delete_account" and description "delete_dialog_desc"',
        expectedResult: 'Delete confirmation dialog appears',
      },
      {
        step: 3,
        instruction: 'Cancel deletion',
        detailedSteps: [
          '1. Tap Cancel button',
        ],
        whatYouShouldSee: 'Bottom sheet closes, no deletion occurs',
        expectedResult: 'Deletion is cancelled',
      },
      {
        step: 4,
        instruction: 'Confirm deletion',
        detailedSteps: [
          '1. Tap delete account button again',
          '2. Tap Delete button in dialog',
        ],
        whatYouShouldSee: 'Loading state appears, delete account API request is made',
        expectedResult: 'Deletion is initiated',
      },
      {
        step: 5,
        instruction: 'Wait for deletion',
        detailedSteps: [
          '1. Wait for API response',
        ],
        whatYouShouldSee: 'Loading state disappears, all baskets are deleted, user is navigated to splash screen',
        expectedResult: 'Deletion completes successfully',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'User is on iOS',
      'User is logged in',
      'Network connection available',
    ],
    testData: 'N/A',
    automatable: false,
    status: 'Not Started',
    notes: 'Delete account button only appears on iOS. All baskets are deleted on account deletion',
    successChecklist: [
      '✓ Delete account button appears (iOS only)',
      '✓ Confirmation dialog appears',
      '✓ Deletion works',
      '✓ Baskets are deleted',
      '✓ Navigation occurs',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-011',
    title: 'Fetch Initial Data',
    whatYoureTesting: 'Verify that initial data (cities, genders, user info, loyalty info) is fetched when screen loads',
    whyItMatters: 'Initial data needs to be loaded from server. If fetching fails, screen cannot display properly.',
    estimatedTime: '2-3 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-011'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-001', 'EC-EDIT-PROFILE-002'],
    testSteps: [
      {
        step: 1,
        instruction: 'Navigate to edit profile screen',
        detailedSteps: [
          '1. Open app',
          '2. Navigate to edit profile screen',
        ],
        whatYouShouldSee: 'Loading state appears while fetching initial data',
        expectedResult: 'API requests are initiated',
      },
      {
        step: 2,
        instruction: 'Wait for data to load',
        detailedSteps: [
          '1. Wait for API responses',
        ],
        whatYouShouldSee: 'All data is loaded: cities list, genders list, user info, and loyalty info. Loading state disappears',
        expectedResult: 'Data is fetched successfully',
      },
      {
        step: 3,
        instruction: 'Verify form is pre-filled',
        detailedSteps: [
          '1. Check name controller',
          '2. Check email controller',
          '3. Check date of birth controller',
          '4. Check mobile controller',
          '5. Check gender selection',
          '6. Check city selection',
        ],
        whatYouShouldSee: 'Form fields show current values: name controller shows user name, email controller shows user email, date of birth controller shows user birthday (if set), mobile controller shows mobile number, gender dropdown shows selected gender, city dropdown shows selected city',
        expectedResult: 'Form is pre-filled correctly',
      },
    ],
    preconditions: [
      'User navigates to edit profile screen',
      'User is logged in',
      'Network connection available',
    ],
    testData: 'N/A',
    automatable: true,
    status: 'Not Started',
    notes: 'Data is fetched in parallel using run4 helper',
    successChecklist: [
      '✓ API requests are made',
      '✓ Data is loaded',
      '✓ Form is pre-filled',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-012',
    title: 'Form Validation',
    whatYoureTesting: 'Verify that form validation works correctly for all fields',
    whyItMatters: 'Form validation ensures data integrity. Invalid data should not be saved.',
    estimatedTime: '2-3 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-002', 'UC-EDIT-PROFILE-003'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-003', 'EC-EDIT-PROFILE-004'],
    testSteps: [
      {
        step: 1,
        instruction: 'Test name validation',
        detailedSteps: [
          '1. Clear name field',
          '2. Try to save',
        ],
        whatYouShouldSee: 'Validation error appears: "invalid_name" message',
        expectedResult: 'Name validation works',
      },
      {
        step: 2,
        instruction: 'Test email validation',
        detailedSteps: [
          '1. Enter invalid email',
          '2. Try to save',
        ],
        whatYouShouldSee: 'Validation error appears: "invalid_email" message',
        expectedResult: 'Email validation works',
      },
      {
        step: 3,
        instruction: 'Test valid form',
        detailedSteps: [
          '1. Enter valid name',
          '2. Enter valid email',
          '3. Select gender',
          '4. Select city',
          '5. Tap Save',
        ],
        whatYouShouldSee: 'No validation errors, form saves successfully',
        expectedResult: 'Valid form saves correctly',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
    ],
    testData: 'Valid and invalid field values',
    automatable: true,
    status: 'Not Started',
    notes: 'Name uses Validators.isValidName, email uses Validators.isValidEmail',
    successChecklist: [
      '✓ Name validation works',
      '✓ Email validation works',
      '✓ Valid form saves',
    ],
  },
  {
    id: 'TC-EDIT-PROFILE-013',
    title: 'Handle Save Error',
    whatYoureTesting: 'Verify that errors during save are handled gracefully',
    whyItMatters: 'Network errors or server errors should not crash the app. Users should see appropriate error messages.',
    estimatedTime: '2-3 minutes',
    type: 'Functional',
    priority: 'P0',
    relatedUseCases: ['UC-EDIT-PROFILE-008'],
    relatedEdgeCases: ['EC-EDIT-PROFILE-009', 'EC-EDIT-PROFILE-010'],
    testSteps: [
      {
        step: 1,
        instruction: 'Make changes and attempt save',
        detailedSteps: [
          '1. Edit profile fields',
          '2. Disable network or simulate error',
          '3. Tap Save',
        ],
        whatYouShouldSee: 'Loading state appears, then error occurs',
        expectedResult: 'Save fails',
      },
      {
        step: 2,
        instruction: 'Verify error handling',
        detailedSteps: [
          '1. Observe error state',
          '2. Check if data is preserved',
        ],
        whatYouShouldSee: 'Error is caught, loading state is cleared. Error message may appear. Form data is preserved. User can retry',
        expectedResult: 'Error is handled gracefully',
      },
      {
        step: 3,
        instruction: 'Retry save',
        detailedSteps: [
          '1. Enable network',
          '2. Tap Save again',
        ],
        whatYouShouldSee: 'Save retries successfully, changes are saved',
        expectedResult: 'Retry works correctly',
      },
    ],
    preconditions: [
      'Edit profile screen is displayed',
      'User has made changes',
      'Network can be disabled',
    ],
    testData: 'Profile changes, network error scenario',
    automatable: false,
    status: 'Not Started',
    notes: 'Errors should be caught and handled without crashing',
    successChecklist: [
      '✓ Error is caught',
      '✓ Loading state is cleared',
      '✓ Data is preserved',
      '✓ Retry works',
    ],
  },
];

