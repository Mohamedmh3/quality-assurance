import type { UseCase } from '../types';

export const restaurantListUseCases: UseCase[] = [
  {
    id: 'UC-REST-LIST-001',
    title: 'Load Restaurant List Screen',
    priority: 'Critical',
    userType: 'End User',
    description: 'When a customer opens the restaurant list screen, the app loads restaurants, categories, filters, and banners, then displays them in an organized layout.',
    preconditions: [
      'User has location permissions enabled',
      'User has a default address set',
      'User is on restaurant list screen',
    ],
    steps: [
      {
        step: 1,
        action: 'App fetches categories, banners, filters, and restaurants in parallel',
        expectedResult: 'All API calls complete successfully',
        uiState: 'Loading indicators displayed for each section',
        flutterFile: 'restaurant_viewmodel.dart:318-323',
      },
      {
        step: 2,
        action: 'App checks if user is logged in (guest check)',
        expectedResult: 'Guest status determined',
        uiState: 'Guest restrictions applied if needed',
        flutterFile: 'restaurant_viewmodel.dart:256-261',
      },
      {
        step: 3,
        action: 'App limits restaurant list for guest users',
        expectedResult: 'Only allowed number of restaurants shown to guests',
        uiState: 'Login prompt shown if more restaurants available',
        flutterFile: 'restaurant_viewmodel.dart:275-282',
      },
      {
        step: 4,
        action: 'App fetches ETA (estimated time) for restaurants',
        expectedResult: 'ETA data merged with restaurant list',
        uiState: 'Restaurants display with delivery times',
        flutterFile: 'restaurant_viewmodel.dart:285-301',
      },
      {
        step: 5,
        action: 'App initializes filters from provided filter data',
        expectedResult: 'Filters pre-selected if provided',
        uiState: 'Filter chips show selected state',
        flutterFile: 'restaurant_viewmodel.dart:138-154',
      },
    ],
    postconditions: [
      'Restaurant list screen displays with all sections',
      'Categories shown in horizontal scrollable list',
      'Filters shown in horizontal scrollable list',
      'Banners displayed in carousel',
      'Restaurant cards displayed in vertical list',
    ],
    successCriteria: [
      'All sections load without errors',
      'Restaurants display correctly',
      'Categories and filters are interactive',
      'Banners display if available',
    ],
    relatedTestCases: ['TC-REST-LIST-001', 'TC-REST-LIST-002', 'TC-REST-LIST-003'],
  },
  {
    id: 'UC-REST-LIST-002',
    title: 'Filter Restaurants by Category',
    priority: 'High',
    userType: 'End User',
    description: 'Customer can tap on category chips to filter restaurants by cuisine type. Multiple categories can be selected.',
    preconditions: [
      'Restaurant list screen is loaded',
      'Categories are available',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps on a category chip',
        expectedResult: 'Category ID added or removed from selectedCategoriesIds',
        uiState: 'Category chip highlights or unhighlights',
        flutterFile: 'restaurant_viewmodel.dart:127-135',
      },
      {
        step: 2,
        action: 'App resets pagination to page 1',
        expectedResult: 'Page reset, enablePullUp enabled',
        uiState: 'Pagination reset',
        flutterFile: 'restaurant_viewmodel.dart:133',
      },
      {
        step: 3,
        action: 'App fetches filtered restaurant list',
        expectedResult: 'Restaurant list updated with category filter',
        uiState: 'Restaurant list refreshes',
        flutterFile: 'restaurant_viewmodel.dart:134',
      },
      {
        step: 4,
        action: 'App sorts categories to show selected ones first',
        expectedResult: 'Selected categories appear at beginning of list',
        uiState: 'Category order updated',
        flutterFile: 'restaurant_viewmodel.dart:331-341',
      },
    ],
    postconditions: [
      'Restaurant list filtered by selected categories',
      'Selected categories highlighted',
      'Category order updated',
      'Pagination reset',
    ],
    successCriteria: [
      'Category selection works correctly',
      'Restaurant list updates immediately',
      'Multiple categories can be selected',
      'Filtering is accurate',
    ],
    relatedTestCases: ['TC-REST-LIST-004', 'TC-REST-LIST-005', 'TC-REST-LIST-006'],
  },
  {
    id: 'UC-REST-LIST-003',
    title: 'Apply Advanced Filters',
    priority: 'High',
    userType: 'End User',
    description: 'Customer can apply various types of filters (inline list, single item list, object) to refine restaurant search.',
    preconditions: [
      'Restaurant list screen is loaded',
      'Filters are available',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps on a filter chip',
        expectedResult: 'Filter action triggered based on filter type',
        uiState: 'Filter chip highlights or bottom sheet opens',
        flutterFile: 'restaurant_view.dart:559-598',
      },
      {
        step: 2,
        action: 'For inline list filters, user taps inner filter item',
        expectedResult: 'Inner filter ID added or removed',
        uiState: 'Inner filter highlights',
        flutterFile: 'restaurant_viewmodel.dart:196-205',
      },
      {
        step: 3,
        action: 'For single item list filters, bottom sheet opens with radio options',
        expectedResult: 'User selects one option',
        uiState: 'Bottom sheet displays options',
        flutterFile: 'restaurant_view.dart:615-708',
      },
      {
        step: 4,
        action: 'For object filters, user toggles filter on/off',
        expectedResult: 'Filter state toggled',
        uiState: 'Filter chip highlights or unhighlights',
        flutterFile: 'restaurant_viewmodel.dart:240-249',
      },
      {
        step: 5,
        action: 'App resets pagination and fetches filtered list',
        expectedResult: 'Restaurant list updated with filters',
        uiState: 'Restaurant list refreshes',
        flutterFile: 'restaurant_viewmodel.dart:190-192, 246-248',
      },
    ],
    postconditions: [
      'Restaurant list filtered by selected filters',
      'Filter chips show selected state',
      'Pagination reset',
    ],
    successCriteria: [
      'All filter types work correctly',
      'Filter state persists',
      'Restaurant list updates correctly',
      'Multiple filters can be combined',
    ],
    relatedTestCases: ['TC-REST-LIST-007', 'TC-REST-LIST-008', 'TC-REST-LIST-009'],
  },
  {
    id: 'UC-REST-LIST-004',
    title: 'Clear All Filters',
    priority: 'Medium',
    userType: 'End User',
    description: 'Customer can clear all selected filters and categories to reset the restaurant list to default view.',
    preconditions: [
      'Some filters or categories are selected',
      'Clear button is visible',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps "Clear" button',
        expectedResult: 'All filters and categories cleared',
        uiState: 'Clear button disappears, filter chips unhighlight',
        flutterFile: 'restaurant_viewmodel.dart:208-220',
      },
      {
        step: 2,
        action: 'App resets innerSelectedFilters map',
        expectedResult: 'All filter states reset to null or empty',
        uiState: 'Filter state cleared',
        flutterFile: 'restaurant_viewmodel.dart:209-215',
      },
      {
        step: 3,
        action: 'App clears selectedCategoriesIds',
        expectedResult: 'No categories selected',
        uiState: 'Category chips unhighlight',
        flutterFile: 'restaurant_viewmodel.dart:217',
      },
      {
        step: 4,
        action: 'App resets pagination and fetches default restaurant list',
        expectedResult: 'Restaurant list shows all restaurants',
        uiState: 'Restaurant list refreshes',
        flutterFile: 'restaurant_viewmodel.dart:216, 218',
      },
    ],
    postconditions: [
      'All filters cleared',
      'All categories deselected',
      'Restaurant list shows default view',
      'Pagination reset',
    ],
    successCriteria: [
      'Clear button works correctly',
      'All filters reset',
      'Restaurant list updates',
      'Clear button hides when no filters selected',
    ],
    relatedTestCases: ['TC-REST-LIST-010'],
  },
  {
    id: 'UC-REST-LIST-005',
    title: 'Load More Restaurants (Pagination)',
    priority: 'High',
    userType: 'End User',
    description: 'Customer can scroll down to load more restaurants. App fetches next page and appends to existing list.',
    preconditions: [
      'Restaurant list screen is loaded',
      'More restaurants are available',
      'Pull-up is enabled',
    ],
    steps: [
      {
        step: 1,
        action: 'User scrolls to bottom of restaurant list',
        expectedResult: 'Pull-to-refresh triggers onLoading',
        uiState: 'Loading indicator appears at bottom',
        flutterFile: 'restaurant_view.dart:195-214',
      },
      {
        step: 2,
        action: 'App increments page number',
        expectedResult: 'Page number increased',
        uiState: 'Page updated',
        flutterFile: 'restaurant_viewmodel.dart:365',
      },
      {
        step: 3,
        action: 'App fetches next page of restaurants',
        expectedResult: 'New restaurants retrieved',
        uiState: 'Loading indicator shows',
        flutterFile: 'restaurant_viewmodel.dart:369-373',
      },
      {
        step: 4,
        action: 'App appends new restaurants to existing list',
        expectedResult: 'Restaurant list grows',
        uiState: 'New restaurants appear in list',
        flutterFile: 'restaurant_viewmodel.dart:379-380',
      },
      {
        step: 5,
        action: 'App fetches ETA for new restaurants',
        expectedResult: 'ETA data merged with new restaurants',
        uiState: 'Restaurants display with delivery times',
        flutterFile: 'restaurant_viewmodel.dart:381-397',
      },
    ],
    postconditions: [
      'More restaurants added to list',
      'List continues to be scrollable',
      'Pagination continues if more pages available',
    ],
    successCriteria: [
      'Pagination works correctly',
      'New restaurants append smoothly',
      'Loading indicator shows during fetch',
      'List remains scrollable',
    ],
    relatedTestCases: ['TC-REST-LIST-011', 'TC-REST-LIST-012', 'TC-REST-LIST-013'],
  },
  {
    id: 'UC-REST-LIST-006',
    title: 'Handle Guest User Restrictions',
    priority: 'High',
    userType: 'End User',
    description: 'When a guest user views restaurant list, they see limited restaurants and a login prompt to see more.',
    preconditions: [
      'User is not logged in (guest)',
      'Restaurant list is loaded',
    ],
    steps: [
      {
        step: 1,
        action: 'App checks if user is logged in',
        expectedResult: 'Guest status detected',
        uiState: 'Guest restrictions applied',
        flutterFile: 'restaurant_viewmodel.dart:256-261',
      },
      {
        step: 2,
        action: 'App limits restaurant list to allowed count',
        expectedResult: 'Only allowedOutletsCountForGuest restaurants shown',
        uiState: 'Restaurant list truncated',
        flutterFile: 'restaurant_viewmodel.dart:275-282',
      },
      {
        step: 3,
        action: 'App disables pull-up pagination',
        expectedResult: 'enablePullUp set to false',
        uiState: 'Cannot load more restaurants',
        flutterFile: 'restaurant_viewmodel.dart:259',
      },
      {
        step: 4,
        action: 'App shows login prompt at end of list',
        expectedResult: 'LoginToSeeMoreWidget displayed',
        uiState: 'Login prompt visible',
        flutterFile: 'restaurant_view.dart:269-275',
      },
    ],
    postconditions: [
      'Limited restaurants displayed',
      'Pagination disabled',
      'Login prompt shown',
    ],
    successCriteria: [
      'Guest restrictions applied correctly',
      'Login prompt appears',
      'Pagination disabled',
      'User can tap login prompt',
    ],
    relatedTestCases: ['TC-REST-LIST-014', 'TC-REST-LIST-015'],
  },
  {
    id: 'UC-REST-LIST-007',
    title: 'Toggle Pickup/Delivery Mode',
    priority: 'High',
    userType: 'End User',
    description: 'Customer can toggle between pickup and delivery modes, which updates restaurant list and filters.',
    preconditions: [
      'Restaurant list screen is loaded',
      'Pickup toggle widget is visible',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps pickup/delivery toggle',
        expectedResult: 'Delivery type changes',
        uiState: 'Toggle updates',
        flutterFile: 'restaurant_view.dart:408-423',
      },
      {
        step: 2,
        action: 'App resets pagination',
        expectedResult: 'Page reset to 1',
        uiState: 'Pagination reset',
        flutterFile: 'restaurant_viewmodel.dart:412',
      },
      {
        step: 3,
        action: 'App reloads filters for new delivery type',
        expectedResult: 'Filters updated for pickup/delivery',
        uiState: 'Filters refresh',
        flutterFile: 'restaurant_viewmodel.dart:413-418',
      },
      {
        step: 4,
        action: 'App reloads restaurant list',
        expectedResult: 'Restaurant list updated for delivery type',
        uiState: 'Restaurant list refreshes',
        flutterFile: 'restaurant_viewmodel.dart:419-421',
      },
    ],
    postconditions: [
      'Delivery type changed',
      'Filters reloaded',
      'Restaurant list updated',
      'Pagination reset',
    ],
    successCriteria: [
      'Toggle works correctly',
      'Restaurant list updates',
      'Filters reload',
      'State persists',
    ],
    relatedTestCases: ['TC-REST-LIST-016'],
  },
  {
    id: 'UC-REST-LIST-008',
    title: 'Navigate to Restaurant Menu',
    priority: 'Critical',
    userType: 'End User',
    description: 'Customer taps on a restaurant card to navigate to the restaurant menu screen.',
    preconditions: [
      'Restaurant list is displayed',
      'Restaurant cards are visible',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps on a restaurant card',
        expectedResult: 'Navigation triggered with restaurant data',
        uiState: 'Screen transitions',
        flutterFile: 'restaurant_view.dart:243-253',
      },
      {
        step: 2,
        action: 'App navigates to restaurant menu screen',
        expectedResult: 'Restaurant menu screen opens',
        uiState: 'New screen displayed',
        flutterFile: 'restaurant_view.dart:244-252',
      },
    ],
    postconditions: [
      'Restaurant menu screen displayed',
      'Restaurant data passed to menu screen',
    ],
    successCriteria: [
      'Navigation works correctly',
      'Restaurant data passed correctly',
      'Screen transition smooth',
    ],
    relatedTestCases: ['TC-REST-LIST-017'],
  },
  {
    id: 'UC-REST-LIST-009',
    title: 'Display Banners',
    priority: 'Medium',
    userType: 'End User',
    description: 'The app displays promotional banners in a carousel above the restaurant list.',
    preconditions: [
      'Restaurant list screen is loaded',
      'Banners are available',
    ],
    steps: [
      {
        step: 1,
        action: 'App fetches banners for market or restaurant type',
        expectedResult: 'Banners retrieved successfully',
        uiState: 'Banners loading indicator shows',
        flutterFile: 'restaurant_viewmodel.dart:414-419',
      },
      {
        step: 2,
        action: 'App displays banners in carousel',
        expectedResult: 'Banner carousel visible',
        uiState: 'Banners scrollable horizontally',
        flutterFile: 'restaurant_view.dart:170-183',
      },
    ],
    postconditions: [
      'Banners displayed in carousel',
      'Banners are scrollable',
    ],
    successCriteria: [
      'Banners load correctly',
      'Carousel works',
      'Banners display properly',
    ],
    relatedTestCases: ['TC-REST-LIST-018'],
  },
  {
    id: 'UC-REST-LIST-010',
    title: 'Open Search Screen',
    priority: 'Medium',
    userType: 'End User',
    description: 'Customer can tap the search icon to open the search screen for finding restaurants or dishes.',
    preconditions: [
      'Restaurant list screen is loaded',
      'Search icon is visible in app bar',
    ],
    steps: [
      {
        step: 1,
        action: 'User taps search icon in app bar',
        expectedResult: 'Search screen opens',
        uiState: 'Screen transitions to search',
        flutterFile: 'restaurant_view.dart:128-140',
      },
      {
        step: 2,
        action: 'If coming from search, app navigates back',
        expectedResult: 'Previous screen displayed',
        uiState: 'Navigation back',
        flutterFile: 'restaurant_view.dart:130-132',
      },
    ],
    postconditions: [
      'Search screen opened or navigated back',
    ],
    successCriteria: [
      'Search icon works',
      'Navigation works correctly',
      'Screen transitions smoothly',
    ],
    relatedTestCases: ['TC-REST-LIST-019'],
  },
  {
    id: 'UC-REST-LIST-011',
    title: 'Select Scheduled Order Time',
    priority: 'Medium',
    userType: 'End User',
    description: 'Customer can select a scheduled delivery/pickup time for their order using the scheduled order picker.',
    preconditions: [
      'Scheduled order picker screen is open',
      'Available times are loaded',
    ],
    steps: [
      {
        step: 1,
        action: 'User selects a day from horizontal day list',
        expectedResult: 'Day selected, times for that day displayed',
        uiState: 'Day highlights, times list updates',
        flutterFile: 'scheduled_picker_page.dart:224-237',
      },
      {
        step: 2,
        action: 'User selects a time slot from vertical list',
        expectedResult: 'Time slot selected',
        uiState: 'Time slot highlights',
        flutterFile: 'scheduled_picker_page.dart:196-201',
      },
      {
        step: 3,
        action: 'User taps Save button',
        expectedResult: 'Selected time saved to checkout',
        uiState: 'Screen closes, time saved',
        flutterFile: 'scheduled_picker_page.dart:393-434',
      },
      {
        step: 4,
        action: 'App formats time based on whether it is today or future',
        expectedResult: 'Time formatted correctly',
        uiState: 'Time displayed in checkout',
        flutterFile: 'scheduled_picker_page.dart:409-428',
      },
    ],
    postconditions: [
      'Scheduled time selected',
      'Time saved to checkout',
      'Picker screen closed',
    ],
    successCriteria: [
      'Day selection works',
      'Time selection works',
      'Time saves correctly',
      'Formatting is correct',
    ],
    relatedTestCases: ['TC-REST-LIST-020', 'TC-REST-LIST-021'],
  },
  {
    id: 'UC-REST-LIST-012',
    title: 'Show Empty State When No Results',
    priority: 'Medium',
    userType: 'End User',
    description: 'When filters result in no restaurants, the app displays an empty state with a message.',
    preconditions: [
      'Filters applied',
      'No restaurants match filters',
    ],
    steps: [
      {
        step: 1,
        action: 'App fetches filtered restaurant list',
        expectedResult: 'Empty list returned',
        uiState: 'Loading completes',
        flutterFile: 'restaurant_viewmodel.dart:264-302',
      },
      {
        step: 2,
        action: 'App checks if restaurant list is empty',
        expectedResult: 'Empty state detected',
        uiState: 'Empty state displayed',
        flutterFile: 'restaurant_view.dart:282-297',
      },
      {
        step: 3,
        action: 'App displays empty state widget',
        expectedResult: 'Empty state message shown',
        uiState: 'Sad mascot image and "no_results" message displayed',
        flutterFile: 'restaurant_view.dart:284-296',
      },
    ],
    postconditions: [
      'Empty state displayed',
      'User can clear filters to see restaurants',
    ],
    successCriteria: [
      'Empty state displays correctly',
      'Message is clear',
      'User can recover by clearing filters',
    ],
    relatedTestCases: ['TC-REST-LIST-022'],
  },
];


