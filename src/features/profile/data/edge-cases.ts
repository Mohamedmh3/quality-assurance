import { EdgeCase } from '@/lib/types';

export const profileEdgeCases: EdgeCase[] = [
  {
    id: 'EC-PROFILE-001',
    title: 'Profile Screen Fails to Load',
    category: 'State',
    likelihood: 'Low',
    impact: 'High',
    triggerCondition: 'Network error, API failure, or app state corruption when loading profile screen',
    expectedBehavior: 'App should display error state with retry option. User should be able to retry loading profile screen.',
    uiHandling: {
      errorMessage: 'Unable to load profile. Please try again.',
      recoveryOptions: ['Retry button', 'Navigate back', 'Restart app'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart', 'profile_viewmodel.dart'],
    },
    relatedTestCases: ['TC-PROFILE-001'],
  },
  {
    id: 'EC-PROFILE-002',
    title: 'User Name is Null or Empty',
    category: 'Data',
    likelihood: 'Medium',
    impact: 'Medium',
    triggerCondition: 'User data is incomplete or user name is not set',
    expectedBehavior: 'Profile screen should display default text "profile" (localized) instead of empty or null name.',
    uiHandling: {
      errorMessage: 'N/A - Handled gracefully',
      recoveryOptions: ['Display default text'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart'],
      validationRules: ['Check if user name exists, use fallback text'],
    },
    relatedTestCases: ['TC-PROFILE-001'],
  },
  {
    id: 'EC-PROFILE-003',
    title: 'User Logs Out While on Profile Screen',
    category: 'State',
    likelihood: 'Medium',
    impact: 'Medium',
    triggerCondition: 'User session expires or user logs out from another device while viewing profile',
    expectedBehavior: 'Profile screen should update to show logged out state. Account sections should hide, login button should appear.',
    uiHandling: {
      errorMessage: 'N/A - State updates automatically',
      recoveryOptions: ['Show login button', 'Hide account sections'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart', 'profile_viewmodel.dart'],
    },
    relatedTestCases: ['TC-PROFILE-002', 'TC-PROFILE-014'],
  },
  {
    id: 'EC-PROFILE-004',
    title: 'Language Change Fails',
    category: 'Network',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'Network error or localization service failure when changing language',
    expectedBehavior: 'Language change should fail gracefully. Previous language should remain. Error message should be shown.',
    uiHandling: {
      errorMessage: 'Unable to change language. Please try again.',
      recoveryOptions: ['Retry language change', 'Continue with current language'],
    },
    implementationNotes: {
      flutterFiles: ['language_bottomsheet.dart'],
    },
    relatedTestCases: ['TC-PROFILE-008'],
  },
  {
    id: 'EC-PROFILE-005',
    title: 'Currency Change Fails',
    category: 'Network',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'Network error or currency service failure when changing currency',
    expectedBehavior: 'Currency change should fail gracefully. Previous currency should remain. Error message should be shown.',
    uiHandling: {
      errorMessage: 'Unable to change currency. Please try again.',
      recoveryOptions: ['Retry currency change', 'Continue with current currency'],
    },
    implementationNotes: {
      flutterFiles: ['currency_bottomsheet.dart'],
    },
    relatedTestCases: ['TC-PROFILE-009'],
  },
  {
    id: 'EC-PROFILE-006',
    title: 'Live Chat Service Unavailable',
    category: 'Network',
    likelihood: 'Medium',
    impact: 'Low',
    triggerCondition: 'Live chat service is down or unavailable when user taps chat button',
    expectedBehavior: 'Chat should show error state or unavailable message. User should be informed that chat is temporarily unavailable.',
    uiHandling: {
      errorMessage: 'Live chat is temporarily unavailable. Please try again later.',
      recoveryOptions: ['Retry chat', 'Contact support via other means'],
    },
    implementationNotes: {
      flutterFiles: ['live_chat_button_widget.dart'],
    },
    relatedTestCases: ['TC-PROFILE-015'],
  },
  {
    id: 'EC-PROFILE-007',
    title: 'Image Picker Permission Denied',
    category: 'Validation',
    likelihood: 'Medium',
    impact: 'Low',
    triggerCondition: 'User denies photo library or camera permission when trying to change profile image',
    expectedBehavior: 'App should show permission request dialog. If denied, show message explaining why permission is needed.',
    uiHandling: {
      errorMessage: 'Permission to access photos is required to change profile image.',
      recoveryOptions: ['Go to Settings to enable permission', 'Cancel'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart'],
      validationRules: ['Check permission before opening picker', 'Handle permission denial'],
    },
    relatedTestCases: ['TC-PROFILE-016'],
  },
  {
    id: 'EC-PROFILE-008',
    title: 'Selected Image is Too Large',
    category: 'Validation',
    likelihood: 'Medium',
    impact: 'Low',
    triggerCondition: 'User selects an image file that exceeds size limits',
    expectedBehavior: 'App should reject large images and show error message. User should be prompted to select smaller image.',
    uiHandling: {
      errorMessage: 'Image is too large. Please select a smaller image.',
      recoveryOptions: ['Select different image', 'Cancel'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart'],
      validationRules: ['Check image file size', 'Reject if exceeds limit'],
    },
    relatedTestCases: ['TC-PROFILE-016'],
  },
  {
    id: 'EC-PROFILE-009',
    title: 'External URL Fails to Open',
    category: 'Network',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'External URL (e.g., Join Us as Driver) fails to open or is invalid',
    expectedBehavior: 'App should handle URL launch failure gracefully. Error message should be shown if URL cannot be opened.',
    uiHandling: {
      errorMessage: 'Unable to open link. Please check your internet connection.',
      recoveryOptions: ['Retry', 'Cancel'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart'],
      validationRules: ['Validate URL before launching', 'Handle launch failures'],
    },
    relatedTestCases: ['TC-PROFILE-022'],
  },
  {
    id: 'EC-PROFILE-010',
    title: 'Navigation Fails to Target Screen',
    category: 'State',
    likelihood: 'Low',
    impact: 'High',
    triggerCondition: 'Target screen is not available, navigation route is invalid, or screen fails to load',
    expectedBehavior: 'App should handle navigation failure gracefully. Error message should be shown. User should be able to return to profile screen.',
    uiHandling: {
      errorMessage: 'Unable to open this section. Please try again.',
      recoveryOptions: ['Retry navigation', 'Return to profile'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart', 'navigation_service.dart'],
      validationRules: ['Validate navigation routes', 'Handle navigation errors'],
    },
    relatedTestCases: ['TC-PROFILE-003', 'TC-PROFILE-004', 'TC-PROFILE-005'],
  },
  {
    id: 'EC-PROFILE-011',
    title: 'Profile Image File is Corrupted',
    category: 'Data',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'Saved profile image file is corrupted or cannot be loaded',
    expectedBehavior: 'App should handle corrupted image gracefully. Default image or placeholder should be shown. User should be able to select new image.',
    uiHandling: {
      errorMessage: 'N/A - Handled gracefully',
      recoveryOptions: ['Show default image', 'Allow user to select new image'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart'],
      validationRules: ['Check if image file exists and is valid', 'Handle file loading errors'],
    },
    relatedTestCases: ['TC-PROFILE-016'],
  },
  {
    id: 'EC-PROFILE-012',
    title: 'Deep Link Navigation to Invite Friends',
    category: 'State',
    likelihood: 'Low',
    impact: 'Medium',
    triggerCondition: 'User opens app via deep link to invite friends while on profile screen',
    expectedBehavior: 'App should handle deep link navigation. If deep link targets invite friends, app should navigate accordingly after loading necessary data.',
    uiHandling: {
      errorMessage: 'N/A - Handled automatically',
      recoveryOptions: ['Navigate to invite friends', 'Load app data first'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart', 'deep_link_manager.dart'],
    },
    relatedTestCases: ['TC-PROFILE-018'],
  },
  {
    id: 'EC-PROFILE-013',
    title: 'Screen Orientation Change',
    category: 'UI',
    likelihood: 'High',
    impact: 'Low',
    triggerCondition: 'User rotates device while viewing profile screen',
    expectedBehavior: 'Profile screen should adapt to new orientation. Layout should remain readable and functional. No data should be lost.',
    uiHandling: {
      errorMessage: 'N/A - Handled automatically',
      recoveryOptions: ['Screen adapts automatically'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart'],
    },
    relatedTestCases: ['TC-PROFILE-001'],
  },
  {
    id: 'EC-PROFILE-014',
    title: 'App Goes to Background While Loading',
    category: 'State',
    likelihood: 'High',
    impact: 'Low',
    triggerCondition: 'User switches to another app while profile screen is loading',
    expectedBehavior: 'App should pause loading. When user returns, loading should resume or screen should be in correct state.',
    uiHandling: {
      errorMessage: 'N/A - Handled automatically',
      recoveryOptions: ['Resume loading', 'Show current state'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart', 'profile_viewmodel.dart'],
    },
    relatedTestCases: ['TC-PROFILE-001'],
  },
  {
    id: 'EC-PROFILE-015',
    title: 'Multiple Rapid Taps on Navigation Options',
    category: 'Concurrency',
    likelihood: 'Medium',
    impact: 'Low',
    triggerCondition: 'User rapidly taps multiple navigation options in quick succession',
    expectedBehavior: 'App should handle rapid taps gracefully. Only one navigation should occur. No duplicate screens should open.',
    uiHandling: {
      errorMessage: 'N/A - Handled automatically',
      recoveryOptions: ['Debounce taps', 'Prevent duplicate navigation'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart'],
      validationRules: ['Debounce tap events', 'Prevent concurrent navigation'],
    },
    relatedTestCases: ['TC-PROFILE-003', 'TC-PROFILE-004'],
  },
  {
    id: 'EC-PROFILE-016',
    title: 'Bottom Sheet Fails to Open',
    category: 'UI',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'System resources are low or bottom sheet component fails to initialize',
    expectedBehavior: 'App should handle bottom sheet failure gracefully. Error message should be shown. User should be able to retry.',
    uiHandling: {
      errorMessage: 'Unable to open options. Please try again.',
      recoveryOptions: ['Retry', 'Cancel'],
    },
    implementationNotes: {
      flutterFiles: ['language_bottomsheet.dart', 'currency_bottomsheet.dart'],
    },
    relatedTestCases: ['TC-PROFILE-008', 'TC-PROFILE-009'],
  },
  {
    id: 'EC-PROFILE-017',
    title: 'Profile Screen Scrolls While Bottom Sheet is Open',
    category: 'UI',
    likelihood: 'Medium',
    impact: 'Low',
    triggerCondition: 'User attempts to scroll profile screen while language or currency bottom sheet is open',
    expectedBehavior: 'Bottom sheet should remain open. Profile screen scrolling should be disabled while bottom sheet is visible.',
    uiHandling: {
      errorMessage: 'N/A - Handled automatically',
      recoveryOptions: ['Bottom sheet blocks scrolling'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart', 'language_bottomsheet.dart'],
    },
    relatedTestCases: ['TC-PROFILE-008', 'TC-PROFILE-009'],
  },
  {
    id: 'EC-PROFILE-018',
    title: 'Analytics Event Fails to Log',
    category: 'Performance',
    likelihood: 'Low',
    impact: 'Low',
    triggerCondition: 'Analytics service is unavailable or fails when logging events (e.g., login from profile)',
    expectedBehavior: 'App should continue functioning normally. Analytics failure should not affect user experience. Event logging should be retried silently.',
    uiHandling: {
      errorMessage: 'N/A - Handled silently',
      recoveryOptions: ['Continue normal flow', 'Retry logging in background'],
    },
    implementationNotes: {
      flutterFiles: ['profile_view.dart', 'analytics_manager.dart'],
    },
    relatedTestCases: ['TC-PROFILE-014'],
  },
];


