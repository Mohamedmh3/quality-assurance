import { UseCase } from '@/lib/types';

export const editProfileUseCases: UseCase[] = [
  {
    id: 'UC-EDIT-PROFILE-001',
    title: 'Display Edit Profile Screen',
    priority: 'Critical',
    userType: 'End User',
    description: 'User sees edit profile screen with current profile information, loyalty points display, and form fields',
    preconditions: ['User is logged in', 'User navigates to edit profile screen'],
    steps: [
      {
        step: 1,
        action: 'Navigate to edit profile screen',
        expectedResult: 'Edit profile screen is displayed',
        uiState: 'Screen shows loading state while fetching initial data',
        flutterFile: 'edit_profile_screen.dart:44-51',
      },
      {
        step: 2,
        action: 'Initial data is loaded',
        expectedResult: 'Profile form and loyalty info are displayed',
        uiState: 'Loyalty widget shows welcome message, points, progress circle. Form shows pre-filled fields',
        flutterFile: 'edit_profile_viewmodel.dart:37-83',
      },
      {
        step: 3,
        action: 'View profile information',
        expectedResult: 'Current profile data is displayed',
        uiState: 'Form fields show current name, email, date of birth, mobile, gender, and city',
        flutterFile: 'edit_profile_form.dart:20-46',
      },
    ],
    postconditions: ['Screen is displayed', 'Data is loaded'],
    successCriteria: ['Screen loads', 'Data is displayed', 'Form is pre-filled'],
    relatedTestCases: ['TC-EDIT-PROFILE-001'],
  },
  {
    id: 'UC-EDIT-PROFILE-002',
    title: 'Edit Full Name',
    priority: 'High',
    userType: 'End User',
    description: 'User edits their full name in the profile form',
    preconditions: ['Edit profile screen is displayed', 'Name field is visible'],
    steps: [
      {
        step: 1,
        action: 'View name field',
        expectedResult: 'Name field is displayed with current name',
        uiState: 'Name input field shows current name value',
        flutterFile: 'edit_profile_form.dart:49-76',
      },
      {
        step: 2,
        action: 'Edit name',
        expectedResult: 'Name is updated',
        uiState: 'User can type new name, validation occurs on blur',
        flutterFile: 'edit_profile_form.dart:65-71',
      },
      {
        step: 3,
        action: 'Save changes',
        expectedResult: 'Name is saved',
        uiState: 'Form validation passes, name is updated on server',
        flutterFile: 'edit_profile_viewmodel.dart:100-135',
      },
    ],
    postconditions: ['Name is updated', 'Changes are saved'],
    successCriteria: ['Name can be edited', 'Validation works', 'Name is saved'],
    relatedTestCases: ['TC-EDIT-PROFILE-002'],
  },
  {
    id: 'UC-EDIT-PROFILE-003',
    title: 'Edit Email Address',
    priority: 'High',
    userType: 'End User',
    description: 'User edits their email address in the profile form',
    preconditions: ['Edit profile screen is displayed', 'Email field is visible'],
    steps: [
      {
        step: 1,
        action: 'View email field',
        expectedResult: 'Email field is displayed with current email',
        uiState: 'Email input field shows current email value',
        flutterFile: 'edit_profile_form.dart:78-107',
      },
      {
        step: 2,
        action: 'Edit email',
        expectedResult: 'Email is updated',
        uiState: 'User can type new email, email validation occurs',
        flutterFile: 'edit_profile_form.dart:94-101',
      },
      {
        step: 3,
        action: 'Save changes',
        expectedResult: 'Email is saved',
        uiState: 'Form validation passes, email is updated on server',
        flutterFile: 'edit_profile_viewmodel.dart:100-135',
      },
    ],
    postconditions: ['Email is updated', 'Changes are saved'],
    successCriteria: ['Email can be edited', 'Validation works', 'Email is saved'],
    relatedTestCases: ['TC-EDIT-PROFILE-003'],
  },
  {
    id: 'UC-EDIT-PROFILE-004',
    title: 'Edit Date of Birth',
    priority: 'Medium',
    userType: 'End User',
    description: 'User edits their date of birth if it was not previously set',
    preconditions: ['Edit profile screen is displayed', 'Date of birth field is visible', 'Date of birth was not previously set'],
    steps: [
      {
        step: 1,
        action: 'View date of birth field',
        expectedResult: 'Date of birth field is displayed',
        uiState: 'Date input field shows current date or is empty',
        flutterFile: 'edit_profile_form.dart:109-149',
      },
      {
        step: 2,
        action: 'Tap date field',
        expectedResult: 'Date picker opens or message appears',
        uiState: 'If date was not set, date picker opens. If date was already set, message appears saying date cannot be changed',
        flutterFile: 'edit_profile_form.dart:127-137',
      },
      {
        step: 3,
        action: 'Select date',
        expectedResult: 'Date is selected and displayed',
        uiState: 'Selected date appears in field in yyyy-MM-dd format',
        flutterFile: 'edit_profile_viewmodel.dart:93-98',
      },
      {
        step: 4,
        action: 'Save changes',
        expectedResult: 'Date is saved',
        uiState: 'Date is updated on server',
        flutterFile: 'edit_profile_viewmodel.dart:100-135',
      },
    ],
    postconditions: ['Date is updated', 'Changes are saved'],
    successCriteria: ['Date can be selected', 'Date is saved', 'Date cannot be changed if already set'],
    relatedTestCases: ['TC-EDIT-PROFILE-004'],
  },
  {
    id: 'UC-EDIT-PROFILE-005',
    title: 'Edit Gender',
    priority: 'High',
    userType: 'End User',
    description: 'User selects their gender from dropdown',
    preconditions: ['Edit profile screen is displayed', 'Gender dropdown is visible'],
    steps: [
      {
        step: 1,
        action: 'View gender dropdown',
        expectedResult: 'Gender dropdown is displayed with current selection',
        uiState: 'Dropdown shows current gender or placeholder',
        flutterFile: 'edit_profile_form.dart:200-230',
      },
      {
        step: 2,
        action: 'Select gender',
        expectedResult: 'Gender is selected',
        uiState: 'Dropdown opens showing available genders, selected gender is highlighted',
        flutterFile: 'edit_profile_viewmodel.dart:85-87',
      },
      {
        step: 3,
        action: 'Save changes',
        expectedResult: 'Gender is saved',
        uiState: 'Gender is updated on server',
        flutterFile: 'edit_profile_viewmodel.dart:100-135',
      },
    ],
    postconditions: ['Gender is updated', 'Changes are saved'],
    successCriteria: ['Gender can be selected', 'Gender is saved'],
    relatedTestCases: ['TC-EDIT-PROFILE-005'],
  },
  {
    id: 'UC-EDIT-PROFILE-006',
    title: 'Edit City',
    priority: 'High',
    userType: 'End User',
    description: 'User selects their city from dropdown',
    preconditions: ['Edit profile screen is displayed', 'City dropdown is visible'],
    steps: [
      {
        step: 1,
        action: 'View city dropdown',
        expectedResult: 'City dropdown is displayed with current selection',
        uiState: 'Dropdown shows current city or placeholder',
        flutterFile: 'edit_profile_form.dart:232-262',
      },
      {
        step: 2,
        action: 'Select city',
        expectedResult: 'City is selected',
        uiState: 'Dropdown opens showing available cities, selected city is highlighted',
        flutterFile: 'edit_profile_viewmodel.dart:89-91',
      },
      {
        step: 3,
        action: 'Save changes',
        expectedResult: 'City is saved',
        uiState: 'City is updated on server',
        flutterFile: 'edit_profile_viewmodel.dart:100-135',
      },
    ],
    postconditions: ['City is updated', 'Changes are saved'],
    successCriteria: ['City can be selected', 'City is saved'],
    relatedTestCases: ['TC-EDIT-PROFILE-006'],
  },
  {
    id: 'UC-EDIT-PROFILE-007',
    title: 'View Loyalty Points',
    priority: 'Medium',
    userType: 'End User',
    description: 'User views their loyalty points and tier information',
    preconditions: ['Edit profile screen is displayed', 'User has loyalty account'],
    steps: [
      {
        step: 1,
        action: 'View loyalty widget',
        expectedResult: 'Loyalty information is displayed',
        uiState: 'Welcome message with user name, circular progress indicator, current points, and points remaining to next tier',
        flutterFile: 'edit_profile_screen.dart:149-218',
      },
      {
        step: 2,
        action: 'View points progress',
        expectedResult: 'Progress circle shows completion percentage',
        uiState: 'Circular progress indicator shows userPoint / endPoint ratio, mascot image in center',
        flutterFile: 'edit_profile_screen.dart:177-186',
      },
    ],
    postconditions: ['Loyalty info is displayed'],
    successCriteria: ['Loyalty widget appears', 'Points are displayed', 'Progress is shown'],
    relatedTestCases: ['TC-EDIT-PROFILE-007'],
  },
  {
    id: 'UC-EDIT-PROFILE-008',
    title: 'Save Profile Changes',
    priority: 'Critical',
    userType: 'End User',
    description: 'User saves all profile changes',
    preconditions: ['Edit profile screen is displayed', 'User has made changes', 'Form is valid'],
    steps: [
      {
        step: 1,
        action: 'Make changes to profile',
        expectedResult: 'Form fields are updated',
        uiState: 'User edits name, email, date, gender, or city',
        flutterFile: 'edit_profile_form.dart',
      },
      {
        step: 2,
        action: 'Tap Save button',
        expectedResult: 'Changes are saved',
        uiState: 'Loading state appears, form validation occurs, API request is made',
        flutterFile: 'edit_profile_viewmodel.dart:100-135',
      },
      {
        step: 3,
        action: 'Wait for save to complete',
        expectedResult: 'Save completes successfully',
        uiState: 'Loading state disappears, screen closes or navigates back',
        flutterFile: 'edit_profile_viewmodel.dart:122-134',
      },
    ],
    postconditions: ['Changes are saved', 'User is navigated back'],
    successCriteria: ['Save works', 'Changes are persisted', 'Navigation occurs'],
    relatedTestCases: ['TC-EDIT-PROFILE-008'],
  },
  {
    id: 'UC-EDIT-PROFILE-009',
    title: 'Logout from Account',
    priority: 'High',
    userType: 'End User',
    description: 'User logs out from their account',
    preconditions: ['Edit profile screen is displayed', 'User is logged in'],
    steps: [
      {
        step: 1,
        action: 'View logout button',
        expectedResult: 'Logout button is displayed',
        uiState: 'Logout button appears below form with refresh icon and "logout" text',
        flutterFile: 'edit_profile_screen.dart:221-248',
      },
      {
        step: 2,
        action: 'Tap logout button',
        expectedResult: 'Logout is initiated',
        uiState: 'Loading state appears, logout API request is made',
        flutterFile: 'edit_profile_viewmodel.dart:137-158',
      },
      {
        step: 3,
        action: 'Wait for logout',
        expectedResult: 'Logout completes',
        uiState: 'Loading state disappears, user is navigated to splash screen, viewmodels are reset',
        flutterFile: 'edit_profile_viewmodel.dart:143-156',
      },
    ],
    postconditions: ['User is logged out', 'User is navigated to splash'],
    successCriteria: ['Logout works', 'Navigation occurs', 'Viewmodels are reset'],
    relatedTestCases: ['TC-EDIT-PROFILE-009'],
  },
  {
    id: 'UC-EDIT-PROFILE-010',
    title: 'Delete Account',
    priority: 'High',
    userType: 'End User',
    description: 'User deletes their account (iOS only)',
    preconditions: ['Edit profile screen is displayed', 'User is on iOS', 'User is logged in'],
    steps: [
      {
        step: 1,
        action: 'View delete account button',
        expectedResult: 'Delete account button is displayed',
        uiState: 'Delete account button appears below logout button with trash icon and red text',
        flutterFile: 'edit_profile_screen.dart:250-298',
      },
      {
        step: 2,
        action: 'Tap delete account button',
        expectedResult: 'Delete account bottom sheet opens',
        uiState: 'Bottom sheet slides up showing delete confirmation dialog',
        flutterFile: 'delete_account_bottom_sheet.dart:7-87',
      },
      {
        step: 3,
        action: 'Confirm deletion',
        expectedResult: 'Account is deleted',
        uiState: 'Loading state appears, delete account API request is made',
        flutterFile: 'edit_profile_viewmodel.dart:160-176',
      },
      {
        step: 4,
        action: 'Wait for deletion',
        expectedResult: 'Deletion completes',
        uiState: 'Loading state disappears, all baskets are deleted, user is navigated to splash screen',
        flutterFile: 'edit_profile_viewmodel.dart:167-173',
      },
    ],
    postconditions: ['Account is deleted', 'User is navigated to splash'],
    successCriteria: ['Delete works', 'Baskets are deleted', 'Navigation occurs'],
    relatedTestCases: ['TC-EDIT-PROFILE-010'],
  },
  {
    id: 'UC-EDIT-PROFILE-011',
    title: 'Fetch Initial Data',
    priority: 'Critical',
    userType: 'System',
    description: 'System fetches cities, genders, user info, and loyalty info when screen loads',
    preconditions: ['User navigates to edit profile screen', 'User is logged in', 'Network connection available'],
    steps: [
      {
        step: 1,
        action: 'Screen initializes',
        expectedResult: 'API requests are initiated',
        uiState: 'Loading state appears while fetching',
        flutterFile: 'edit_profile_viewmodel.dart:37-83',
      },
      {
        step: 2,
        action: 'Data is fetched',
        expectedResult: 'All data is loaded',
        uiState: 'Cities, genders, user info, and loyalty info are fetched in parallel',
        flutterFile: 'edit_profile_viewmodel.dart:40-45',
      },
      {
        step: 3,
        action: 'Form is pre-filled',
        expectedResult: 'Form fields show current values',
        uiState: 'Name, email, date of birth, mobile controllers are set. Gender and city dropdowns show current selections',
        flutterFile: 'edit_profile_viewmodel.dart:76-80',
      },
    ],
    postconditions: ['Data is loaded', 'Form is pre-filled'],
    successCriteria: ['API requests work', 'Data is loaded', 'Form is pre-filled'],
    relatedTestCases: ['TC-EDIT-PROFILE-011'],
  },
];

